{
    "version": "https://jsonfeed.org/version/1",
    "title": "陈布衣的博客",
    "description": "",
    "home_page_url": "http://buyi.dev",
    "items": [
        {
            "id": "http://buyi.dev/2025/cs2-plugin-framework-tests/",
            "url": "http://buyi.dev/2025/cs2-plugin-framework-tests/",
            "title": "反恐精英2 各插件平台性能简易测试对比",
            "date_published": "2025-12-13T03:28:51.000Z",
            "content_html": "<p>简单对比一下 Counter-Strike 2 各个插件平台的性能。<br>我觉得能逆向能做插件平台的人都好NB。都做出这么多平台了（   </p>\n<p>cs2游戏版本：  14128<br>Metamod 版本：  2.0.0-dev+1374  </p>\n<p>测试的内容很简单，都是制作一个指令，在无人的服务器里，使用 de_inferno 地图。<br>只记录cs2启动后的第一次执行数据，因为多次执行有实体信息缓存机制（   </p>\n<p>获取每个实体的简要属性并组成一个字符串。<br>对每个 info_ 开头的实体 teleport 到目前坐标+一个小 Vector 偏移。<br>生成和 Fire 一个 <code>cs_win_panel_round</code> GameEvent 。<br>以上循环执行 1000 次，计算总需要的时长。    </p>\n<h1 id=\"结果比较\"><a href=\"#结果比较\" class=\"headerlink\" title=\"结果比较\"></a>结果比较</h1><p><img src=\"/image/cs2_framework_chart1.jpg\"></p>\n<h1 id=\"Plugify-S2-Launcher\"><a href=\"#Plugify-S2-Launcher\" class=\"headerlink\" title=\"Plugify &#x2F; S2-Launcher\"></a>Plugify &#x2F; S2-Launcher</h1><p><a href=\"https://github.com/untrustedmodders/\">github</a><br>我按他们的文档试了，但是没法正常运行，就不管了，<br>这包管理做的跟天书一样，感觉好难用。<br>虽然在更新却没有一个 issue ，也没有 star，不知道他们的用户在哪里。  </p>\n<h1 id=\"ModSharp\"><a href=\"#ModSharp\" class=\"headerlink\" title=\"ModSharp\"></a>ModSharp</h1><p><a href=\"https://github.com/Kxnrl/modsharp-public\">github</a><br>版本： 2.1.88 （2025-11-22）   </p>\n<figure class=\"highlight cs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs cs\"><span class=\"hljs-comment\">// tt</span><br><span class=\"hljs-comment\">// time: 628 ms. entityCount: 766. infoEntityCount: 44.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">private</span> ECommandAction <span class=\"hljs-title\">OnTTCommand</span>(<span class=\"hljs-params\">StringCommand command</span>)</span><br>&#123;<br>    <span class=\"hljs-keyword\">var</span> sw = Stopwatch.StartNew();<br>    <span class=\"hljs-built_in\">string</span> str;<br>    <span class=\"hljs-built_in\">int</span> entityCount = <span class=\"hljs-number\">0</span>;<br>    <span class=\"hljs-built_in\">int</span> infoEntityCount = <span class=\"hljs-number\">0</span>;<br>    <span class=\"hljs-keyword\">var</span> entityManager = _sharedSystem.GetEntityManager();<br>    <span class=\"hljs-keyword\">var</span> eventManager = _sharedSystem.GetEventManager();<br>    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-built_in\">int</span> i = <span class=\"hljs-number\">0</span>; i &lt; <span class=\"hljs-number\">1000</span>; i++)<br>    &#123;<br>        entityCount = <span class=\"hljs-number\">0</span>;<br>        infoEntityCount = <span class=\"hljs-number\">0</span>;<br>        <span class=\"hljs-keyword\">var</span> posAdd = <span class=\"hljs-keyword\">new</span> Vector(i / <span class=\"hljs-number\">999.0f</span>, i / <span class=\"hljs-number\">-999.0f</span>, i / <span class=\"hljs-number\">999.0f</span>);<br><br>        IBaseEntity? ent = <span class=\"hljs-literal\">null</span>;<br>        <span class=\"hljs-keyword\">while</span> (<span class=\"hljs-literal\">true</span>)<br>        &#123;<br>            ent = entityManager.FindEntityByClassname(ent, <span class=\"hljs-string\">&quot;*&quot;</span>);<br>            <span class=\"hljs-keyword\">if</span> (ent != <span class=\"hljs-literal\">null</span> &amp;&amp; ent.IsValid())<br>            &#123;<br>                entityCount += <span class=\"hljs-number\">1</span>;<br>                <span class=\"hljs-keyword\">if</span> (ent.Classname.StartsWith(<span class=\"hljs-string\">&quot;info_&quot;</span>))<br>                &#123;<br>                    ent.Teleport(ent.GetAbsOrigin() + posAdd);<br>                    infoEntityCount += <span class=\"hljs-number\">1</span>;<br>                &#125;<br>                str = <span class=\"hljs-string\">$&quot;<span class=\"hljs-subst\">&#123;ent.Index&#125;</span> <span class=\"hljs-subst\">&#123;ent.Classname&#125;</span> <span class=\"hljs-subst\">&#123;ent.Health&#125;</span> <span class=\"hljs-subst\">&#123;ent.GetAbsOrigin()&#125;</span> <span class=\"hljs-subst\">&#123;ent.GetAbsAngles()&#125;</span>&quot;</span>;<br>            &#125;<br>            <span class=\"hljs-keyword\">else</span><br>            &#123;<br>                <span class=\"hljs-keyword\">break</span>;<br>            &#125;<br>        &#125;<br><br>        <span class=\"hljs-keyword\">if</span> (eventManager.CreateEvent(<span class=\"hljs-string\">&quot;cs_win_panel_round&quot;</span>, <span class=\"hljs-literal\">true</span>) <span class=\"hljs-keyword\">is</span> IGameEvent e)<br>        &#123;<br>            e.SetString(<span class=\"hljs-string\">&quot;funfact_token&quot;</span>, <span class=\"hljs-string\">&quot;aaa bbb ccc&quot;</span>);<br>            e.Fire(<span class=\"hljs-literal\">false</span>);<br>        &#125;<br>    &#125;<br>    sw.Stop();<br>    Console.WriteLine(<span class=\"hljs-string\">$&quot;time: <span class=\"hljs-subst\">&#123;sw.ElapsedMilliseconds:<span class=\"hljs-number\">0</span>&#125;</span> ms. entityCount: <span class=\"hljs-subst\">&#123;entityCount&#125;</span>. infoEntityCount: <span class=\"hljs-subst\">&#123;infoEntityCount&#125;</span>.&quot;</span>);<br><br>    <span class=\"hljs-keyword\">return</span> ECommandAction.Stopped;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h1 id=\"SwiftlyS2\"><a href=\"#SwiftlyS2\" class=\"headerlink\" title=\"SwiftlyS2\"></a>SwiftlyS2</h1><p><a href=\"https://github.com/swiftly-solution/swiftlys2\">github</a><br>版本： 1.0.6-beta.14  （2025-12-13）  </p>\n<figure class=\"highlight cs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs cs\"><span class=\"hljs-comment\">// sw_tt</span><br><span class=\"hljs-comment\">// 单纯版：  time: 804 ms. entityCount: 767. infoEntityCount: 44.</span><br><span class=\"hljs-comment\">// METAMOD 版本： time: 799 ms. entityCount: 767. infoEntityCount: 44.</span><br>[<span class=\"hljs-meta\">Command(<span class=\"hljs-string\">&quot;tt&quot;</span>)</span>]<br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">OnTTCommand</span>(<span class=\"hljs-params\">ICommandContext context</span>)</span><br>&#123;<br>    <span class=\"hljs-keyword\">if</span> (context.IsSentByPlayer) &#123; <span class=\"hljs-keyword\">return</span>; &#125;<br>    <span class=\"hljs-keyword\">var</span> sw = Stopwatch.StartNew();<br>    <span class=\"hljs-built_in\">string</span> str;<br>    <span class=\"hljs-built_in\">int</span> entityCount = <span class=\"hljs-number\">0</span>;<br>    <span class=\"hljs-built_in\">int</span> infoEntityCount = <span class=\"hljs-number\">0</span>;<br>    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-built_in\">int</span> i = <span class=\"hljs-number\">0</span>; i &lt; <span class=\"hljs-number\">1000</span>; i++)<br>    &#123;<br>        entityCount = <span class=\"hljs-number\">0</span>;<br>        infoEntityCount = <span class=\"hljs-number\">0</span>;<br>        <span class=\"hljs-keyword\">var</span> posAdd = <span class=\"hljs-keyword\">new</span> Vector(i / <span class=\"hljs-number\">999f</span>, -i / <span class=\"hljs-number\">999f</span>, i / <span class=\"hljs-number\">999f</span>);<br>        <span class=\"hljs-keyword\">var</span> allEnts = Core.EntitySystem.GetAllEntities();<br>        <span class=\"hljs-keyword\">foreach</span> (<span class=\"hljs-keyword\">var</span> e <span class=\"hljs-keyword\">in</span> allEnts)<br>        &#123;<br>            <span class=\"hljs-keyword\">if</span> (!e.IsValid) &#123; <span class=\"hljs-keyword\">continue</span>; &#125;<br>            entityCount += <span class=\"hljs-number\">1</span>;<br>            <span class=\"hljs-keyword\">var</span> ent = e.As&lt;CBaseEntity&gt;();<br>            <span class=\"hljs-keyword\">if</span> (ent.DesignerName.StartsWith(<span class=\"hljs-string\">&quot;info_&quot;</span>))<br>            &#123;<br>                ent.Teleport(ent.AbsOrigin! + posAdd, <span class=\"hljs-literal\">null</span>, <span class=\"hljs-literal\">null</span>);<br>                infoEntityCount += <span class=\"hljs-number\">1</span>;<br>            &#125;<br>            str = <span class=\"hljs-string\">$&quot;<span class=\"hljs-subst\">&#123;ent.Index&#125;</span> <span class=\"hljs-subst\">&#123;ent.DesignerName&#125;</span> <span class=\"hljs-subst\">&#123;ent.Health&#125;</span> <span class=\"hljs-subst\">&#123;ent.AbsOrigin&#125;</span> <span class=\"hljs-subst\">&#123;ent.AbsRotation&#125;</span>&quot;</span>;<br>        &#125;<br>        Core.GameEvent.Fire&lt;EventCsWinPanelRound&gt;(ev =&gt;<br>        &#123;<br>            ev.FunfactToken = <span class=\"hljs-string\">&quot;aaa bbb ccc&quot;</span>;<br>            ev.DontBroadcast = <span class=\"hljs-literal\">false</span>;<br>        &#125;);<br>    &#125;<br>    sw.Stop();<br>    Console.WriteLine(<span class=\"hljs-string\">$&quot;time: <span class=\"hljs-subst\">&#123;sw.ElapsedMilliseconds:<span class=\"hljs-number\">0</span>&#125;</span> ms. entityCount: <span class=\"hljs-subst\">&#123;entityCount&#125;</span>. infoEntityCount: <span class=\"hljs-subst\">&#123;infoEntityCount&#125;</span>.&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h1 id=\"CS2fixes\"><a href=\"#CS2fixes\" class=\"headerlink\" title=\"CS2fixes\"></a>CS2fixes</h1><p><a href=\"https://github.com/Source2ZE/CS2Fixes\">github</a><br>严格意义上这不算是个插件平台，给原版 cs2fixes 加了一点代码。<br>版本：  v1.16.6  （2025-12-06）   </p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs c++\"><span class=\"hljs-comment\">// c_tt </span><br><span class=\"hljs-comment\">// time: 546 ms. entityCount: 767. infoEntityCount: 44.</span><br><span class=\"hljs-built_in\">CON_COMMAND_CHAT_FLAGS</span>(tt, <span class=\"hljs-string\">&quot;test&quot;</span>, ADMFLAG_GENERIC)<br>&#123;<br>\t<span class=\"hljs-keyword\">auto</span> start = std::chrono::high_resolution_clock::<span class=\"hljs-built_in\">now</span>();<br>\t<span class=\"hljs-type\">char</span> str[<span class=\"hljs-number\">1023</span>];<br>\t<span class=\"hljs-type\">int</span> entityCount = <span class=\"hljs-number\">0</span>;<br>\t<span class=\"hljs-type\">int</span> infoEntityCount = <span class=\"hljs-number\">0</span>;<br>\t<span class=\"hljs-keyword\">auto</span> prefix = <span class=\"hljs-string\">&quot;info_&quot;</span>;<br>\t<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">size_t</span> i = <span class=\"hljs-number\">0</span>; i &lt; <span class=\"hljs-number\">1000</span>; i++)<br>\t&#123;<br>\t\tVector* posAdd = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Vector</span>(i / <span class=\"hljs-number\">999.0f</span>, i / <span class=\"hljs-number\">-999.0f</span>, i / <span class=\"hljs-number\">999.0f</span>);<br><br>\t\tentityCount = <span class=\"hljs-number\">0</span>;<br>\t\tinfoEntityCount = <span class=\"hljs-number\">0</span>;<br>\t\t<span class=\"hljs-keyword\">auto</span> iter = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">EntityInstanceIter_t</span>();<br>\t\t<span class=\"hljs-keyword\">while</span> (<span class=\"hljs-literal\">true</span>)<br>\t\t&#123;<br>\t\t\t<span class=\"hljs-keyword\">auto</span> e = iter-&gt;<span class=\"hljs-built_in\">Next</span>();<br>\t\t\t<span class=\"hljs-keyword\">if</span> (!e) <span class=\"hljs-keyword\">break</span>;<br>\t\t\t<span class=\"hljs-keyword\">auto</span> ent = <span class=\"hljs-built_in\">reinterpret_cast</span>&lt;CBaseEntity*&gt;(e);<br>\t\t\t<span class=\"hljs-keyword\">auto</span> origin = ent-&gt;<span class=\"hljs-built_in\">GetAbsOrigin</span>();<br>\t\t\t<span class=\"hljs-keyword\">auto</span> angle = ent-&gt;<span class=\"hljs-built_in\">GetAbsRotation</span>();<br>\t\t\t<span class=\"hljs-keyword\">auto</span> cls = ent-&gt;<span class=\"hljs-built_in\">GetClassname</span>();<br>\t\t\t<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-built_in\">strncmp</span>(cls, prefix, <span class=\"hljs-built_in\">strlen</span>(prefix)) == <span class=\"hljs-number\">0</span>)<br>\t\t\t&#123;<br>\t\t\t\torigin.x += posAdd-&gt;x;<br>\t\t\t\torigin.y += posAdd-&gt;y;<br>\t\t\t\torigin.z += posAdd-&gt;z;<br>\t\t\t\tent-&gt;<span class=\"hljs-built_in\">Teleport</span>(&amp;origin, <span class=\"hljs-literal\">nullptr</span>, <span class=\"hljs-literal\">nullptr</span>);<br>\t\t\t\tinfoEntityCount += <span class=\"hljs-number\">1</span>;<br>\t\t\t&#125;<br>\t\t\tentityCount += <span class=\"hljs-number\">1</span>;<br>\t\t\t<span class=\"hljs-built_in\">V_snprintf</span>(str, <span class=\"hljs-built_in\">sizeof</span>(str), <span class=\"hljs-string\">&quot;%d %s %d pos:%f %f %f ang: %f %f %f&quot;</span>, ent-&gt;<span class=\"hljs-built_in\">GetEntityIndex</span>().<span class=\"hljs-built_in\">Get</span>(), cls, ent-&gt;<span class=\"hljs-built_in\">m_iHealth</span>(), origin.x, origin.y, origin.z, angle.x, angle.y, angle.z);<br>\t\t&#125;<br><br>\t\tIGameEvent* pEvent = g_gameEventManager-&gt;<span class=\"hljs-built_in\">CreateEvent</span>(<span class=\"hljs-string\">&quot;cs_win_panel_round&quot;</span>);<br>\t\t<span class=\"hljs-keyword\">if</span> (!pEvent) <span class=\"hljs-keyword\">return</span>;<br>\t\tpEvent-&gt;<span class=\"hljs-built_in\">SetString</span>(<span class=\"hljs-string\">&quot;funfact_token&quot;</span>, <span class=\"hljs-string\">&quot;aaa bbb ccc&quot;</span>);<br>\t\tg_gameEventManager-&gt;<span class=\"hljs-built_in\">FireEvent</span>(pEvent, <span class=\"hljs-literal\">false</span>);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">auto</span> end = std::chrono::high_resolution_clock::<span class=\"hljs-built_in\">now</span>();<br>\t<span class=\"hljs-keyword\">auto</span> duration_ms = std::chrono::<span class=\"hljs-built_in\">duration_cast</span>&lt;std::chrono::milliseconds&gt;(end - start);<br>\t<span class=\"hljs-built_in\">Message</span>(<span class=\"hljs-string\">&quot;time: %d ms. entityCount: %d. infoEntityCount: %d.\\n&quot;</span>, duration_ms.<span class=\"hljs-built_in\">count</span>(), entityCount, infoEntityCount);<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h1 id=\"CounterStrikeSharp\"><a href=\"#CounterStrikeSharp\" class=\"headerlink\" title=\"CounterStrikeSharp\"></a>CounterStrikeSharp</h1><p><a href=\"https://github.com/roflmuffin/CounterStrikeSharp\">github</a><br>版本： v1.0.349 （2025-12-12）   </p>\n<figure class=\"highlight cs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs cs\"><span class=\"hljs-comment\">// tt  1.5  -2.5  3.5</span><br><span class=\"hljs-comment\">// time: 2298 ms. entityCount: 767. infoEntityCount: 44.</span><br>[<span class=\"hljs-meta\">ConsoleCommand(<span class=\"hljs-string\">&quot;tt&quot;</span>)</span>]<br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">CommandTT</span>(<span class=\"hljs-params\">CCSPlayerController? caller, CommandInfo command</span>)</span><br>&#123;<br>    <span class=\"hljs-keyword\">if</span> (caller != <span class=\"hljs-literal\">null</span>) &#123; <span class=\"hljs-keyword\">return</span>; &#125;<br>    <span class=\"hljs-keyword\">var</span> sw = Stopwatch.StartNew();<br>    <span class=\"hljs-built_in\">string</span> str;<br>    <span class=\"hljs-built_in\">int</span> entityCount = <span class=\"hljs-number\">0</span>;<br>    <span class=\"hljs-built_in\">int</span> infoEntityCount = <span class=\"hljs-number\">0</span>;<br>    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-built_in\">int</span> i = <span class=\"hljs-number\">0</span>; i &lt; <span class=\"hljs-number\">1000</span>; i++)<br>    &#123;<br>        entityCount = <span class=\"hljs-number\">0</span>;<br>        infoEntityCount = <span class=\"hljs-number\">0</span>;<br>        <span class=\"hljs-keyword\">var</span> posAdd = <span class=\"hljs-keyword\">new</span> Vector(i / <span class=\"hljs-number\">999.0f</span>, i / <span class=\"hljs-number\">-999.0f</span>, i / <span class=\"hljs-number\">999.0f</span>);<br>        <span class=\"hljs-keyword\">foreach</span> (<span class=\"hljs-keyword\">var</span> e <span class=\"hljs-keyword\">in</span> Utilities.GetAllEntities())<br>        &#123;<br>            <span class=\"hljs-keyword\">if</span> (!e.IsValid) &#123; <span class=\"hljs-keyword\">continue</span>; &#125;<br>            entityCount += <span class=\"hljs-number\">1</span>;<br>            <span class=\"hljs-keyword\">var</span> ent = e.As&lt;CBaseEntity&gt;();<br>            <span class=\"hljs-keyword\">if</span> (ent.DesignerName.StartsWith(<span class=\"hljs-string\">&quot;info_&quot;</span>))<br>            &#123;<br>                ent.Teleport(ent.AbsOrigin! + posAdd);<br>                infoEntityCount += <span class=\"hljs-number\">1</span>;<br>            &#125;<br>            str = <span class=\"hljs-string\">$&quot;<span class=\"hljs-subst\">&#123;ent.Index&#125;</span> <span class=\"hljs-subst\">&#123;ent.DesignerName&#125;</span> <span class=\"hljs-subst\">&#123;ent.Health&#125;</span> <span class=\"hljs-subst\">&#123;ent.AbsOrigin&#125;</span> <span class=\"hljs-subst\">&#123;ent.AbsRotation&#125;</span>&quot;</span>;<br>        &#125;<br><br>        <span class=\"hljs-keyword\">var</span> ev = <span class=\"hljs-keyword\">new</span> EventCsWinPanelRound(<span class=\"hljs-literal\">true</span>);<br>        ev.FunfactToken = <span class=\"hljs-string\">&quot;aaa bbb ccc&quot;</span>;<br>        ev.FireEvent(<span class=\"hljs-literal\">false</span>);<br>    &#125;<br>    sw.Stop();<br>    Console.WriteLine(<span class=\"hljs-string\">$&quot;time: <span class=\"hljs-subst\">&#123;sw.ElapsedMilliseconds:<span class=\"hljs-number\">0</span>&#125;</span> ms. entityCount: <span class=\"hljs-subst\">&#123;entityCount&#125;</span>. infoEntityCount: <span class=\"hljs-subst\">&#123;infoEntityCount&#125;</span>.&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>\n\n",
            "tags": [
                "cs2"
            ]
        },
        {
            "id": "http://buyi.dev/2025/ffmpegui/",
            "url": "http://buyi.dev/2025/ffmpegui/",
            "title": "我的 FFMPEG UI",
            "date_published": "2025-09-25T06:34:09.000Z",
            "content_html": "<p>我试用了几个 FFMPEG 的 gui 软件，发现他们都不能做到套着文件夹结构进行转码工作。<br>比如我有一些图片文件，结构化的分布在多个层级的文件夹里，他们就做不到什么结构进去，什么结构出来。<br>对这些一般般的 GUI 来说，他们只能统一输出到另外一个地方。<br>就算可以输出到原文件夹，也会给文件名加上奇奇怪怪的后缀。<br>而且这些 GUI 的操作手感都不好。   </p>\n<p>最初我还可以用 ps1 写脚本糊弄一下，后面用的越来越频繁。我就自己做了一个简易轮子。<br>支持什么文件夹结构进，什么文件夹结构出。<br>参数全靠自己写。然后保存成模板。<br>也没有转码进度显示，就是个纯粹的 .bat 生成和呼叫工具。   </p>\n<p>我记得我用了某某软件，他就死脑筋的单线程转码一堆图片，<br>然后比如说我要转码到 webp 。但是有 1.jpg 和 1.png 同时存在，<br>他会转码到半路上，才会报错 1.webp 已经存在，然后也进行不下去了，半途而废了。<br>我的 UI 会只转码修改时间最新的那个，并且开始工作的时候就已经会提出警报了。   </p>\n<p>我还试用过另外一个开源 GUI ，他那个多任务同时管理有 BUG ，<br>我同时多开一点就报错到死掉。太笨了，我也懒得给他发 issue 。<br>而我这个简简单单，多少个任务同时进行，就生成多少个 .bat 文件，然后同时把他们运行起来就完事了。<br>如果有安装 windows Terminal 可嵌入到一个窗口里的多个标签页。<br>cmd 窗口的标题会显示一个简易的进度。   </p>\n<p>源码：<br><a href=\"https://github.com/chenbuyi2019/BuyiFFmpegUI\">https://github.com/chenbuyi2019/BuyiFFmpegUI</a>   </p>\n<p>截图：<br><img src=\"/image/ffmpegui.webp\">   </p>\n",
            "tags": [
                "code",
                ".net"
            ]
        },
        {
            "id": "http://buyi.dev/2025/postmarks-km/",
            "url": "http://buyi.dev/2025/postmarks-km/",
            "title": "集齐了昆明14个区县的邮戳",
            "date_published": "2025-07-02T05:28:22.000Z",
            "content_html": "<p>我是一个昆明人，我自豪。<br>昆明一共有14个区县，每个我都去了一趟，并盖戳留念。   </p>\n<p><img src=\"/image/postmarks_km.webp\">  </p>\n",
            "tags": []
        },
        {
            "id": "http://buyi.dev/2025/cs2-mdmp-view/",
            "url": "http://buyi.dev/2025/cs2-mdmp-view/",
            "title": "反恐精英2 mdmp 文件里内嵌日志的解读",
            "date_published": "2025-03-01T11:39:04.000Z",
            "content_html": "<p>cs2.exe 崩溃之后，有概率生成 mdmp 文件，之前我只用 Visual Studio 和 windbg 去打开 mdmp 文件。<br>都没有发挥出 mdmp 文件的真实价值。   </p>\n<p>与其打开 Visual Studio 或 windbg 在那瞎猜，不如直接用代码编辑器打开（甚至记事本）。<br>然后搜索文本 <code>Console History (reversed)</code> ，这样就可以看到一大段明文日志。<br>这个日志是新的在前面，老的在后面进行排布的。 </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs log\">Console History (reversed)<br><br>2852(200.822541):  FATAL ERROR: attempting to render with error material for &#x27;materials/error.vmat&#x27;<br>2851(200.822512):  FATAL ERROR: attempting to render with error material for &#x27;materials/error.vmat&#x27;<br>2850(200.822495):  FATAL ERROR: attempting to render with error material for &#x27;materials/error.vmat&#x27;<br>2849(200.822487):  FATAL ERROR: attempting to render with error material for &#x27;materials/error.vmat&#x27;<br>2848(200.822467):  FATAL ERROR: attempting to render with error material for &#x27;materials/error.vmat&#x27;<br>2847(200.822231):  Sending Steam API content notification<br>2846(200.822209):  C:\\buildworker\\csgo_rel_win64\\build\\src\\filesystem\\basefilesystem.cpp (7062) : AssertMsg Failed in function CBaseFileSystem::MarkContentCorrupt():<br>Content being marked corrupt.  bMissingFilesOnly = false, pFile specified as &#x27;NULL&#x27;, reason: &#x27;FATAL ERROR: attempting to render with error material for &#x27;materials/error.vmat&#x27;&#x27;<br>2845(200.822203):  Sending Steam API content notification<br></code></pre></td></tr></table></figure>\n\n<p>如上文我们遇到的是 <code>materials/error.vmat</code><br>这是个非常司马的难题，因为 cs2 遇到丢失的 vmat 贴图它不会忽略、也不会在 UI 里告诉你丢失了什么，<br>它只会弹出这个该死的弹窗。<br>然后强制启动 steam 的验证游戏完整性，逼你等上几分钟才能重启游戏。<br>在这里有个比较快的定位丢失文件的办法，就是从 mdmp 提供的日志里查看。<br>从日志的文本里搜索正则 <code>Failed loading resource .+\\.vmat_c</code> 就可以直接看见到底哪个 <code>.vmat_c</code> 丢失了。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs log\">2252(194.518007):   [ExG积分商城] 你得到了 4 积分：僵尸通关<br>2251(193.816209):  Failed loading resource &quot;knif/kukri_beast.vmat_c&quot; (ERROR_FILEOPEN: File not found)<br></code></pre></td></tr></table></figure>\n\n<p>在实战中，这个办法的用途也没有想象中的大，针对 error.vmat 难题是够用了。<br>可以快速从玩家闪退提供的文件里找到问题来源。以及一些可能的地图 IO 类导致的服务器崩溃。<br>使用插件特地实现的一些崩溃， mdmp 日志能提供的帮助反而较少。</p>\n",
            "tags": [
                "cs2"
            ]
        },
        {
            "id": "http://buyi.dev/2024/gmod-ain/",
            "url": "http://buyi.dev/2024/gmod-ain/",
            "title": "GMod 中 NPC AI 路径 ain 文件版本控制问题",
            "date_published": "2024-12-12T06:51:43.000Z",
            "content_html": "<p>半条命2 和 GMod 中的 NPC AI 路径点使用的是 <a href=\"https://developer.valvesoftware.com/wiki/Nodegraph\">Nodegraph</a> 技术，<br>对应的文件是 <a href=\"https://developer.valvesoftware.com/wiki/AIN\">.ain</a> 文件，保存在 <code>maps/graphs</code> 文件夹里。   </p>\n<p>当游戏觉得 .ain 文件版本和 .bsp 地图版本不对应的时候，游戏就会自动根据地图内的 <code>info_node</code> 系列实体生成新的 .ain 文件。<br>就是刚刚进入游戏的时候，会看见 <code>Node graph out of date. Rebuilding...</code> 这句话显示在屏幕上。   </p>\n<p>有一些 mod 作者做的地图没有在地图里放置对应的 node 实体，导致 NPC 无法正常识路。<br>.ain 文件可以脱离于地图内容，直接单独生成。<br>比较好用的 gmod 工具是 <a href=\"https://steamcommunity.com/sharedfiles/filedetails/?id=2004023752\">Nodegraph Editor Expansion</a> 。    </p>\n<p>如果是 workshop 订阅来的 bsp 地图，最简单，<br>只要 .ain 文件存在，它就认。没有文件版本控制问题。   </p>\n<p>如果是裸的 bsp 文件直接放在 maps 文件夹里，<br>gmod 就会以 <strong>文件修改时间</strong> 为基准，决定是否重新建立。<br>就是这么简单粗暴，我还以为是根据文件内部标注的 hash 决定的，结果只是文件修改时间而已。   </p>\n<p>比如我弄了一个 <code>fff.bsp</code> ，需要放在服务器 maps 里，它的贴图没有打包进去。<br>我们把贴图一并打包进去，然后做成 <code>fff.bsp.bz2</code> 放在 CDN 里给玩家下载。   </p>\n<p>这里打包好贴图的 <code>fff.bsp</code> 的文件修改时间就会是我编辑打包的时间，比如说 12月1日。<br><code>fff.bsp</code> 刚好没有 node 实体， <code>fff.ain</code> 是第三方作者做的，我下载来的文件是 12KB， 3月1日 。<br>我发现一进游戏， gmod 就会自动重建 ain 文件， <code>fff.ain</code> 就被覆盖成了一个空白文件，只有 16 Bytes 。   </p>\n<p>解决办法有两个：   </p>\n<p>第一，关闭游戏自动重建，在 <code>server.cfg</code> 或者 <code>autoexec.cfg</code> 里加入 <code>ai_norebuildgraph 1</code> 参数。<br>拆开来读就是  <code>ai no rebuild graph</code><br>这样就以后全部的地图都不会主动新建 .ain 文件了。<br>对独立服务器来说也还行，因为我们可以用本地单人游戏做好的 .ain 复制到服务器。不需要服务器自己建立。   </p>\n<p>第二，修改文件时间。反正时间只是文件系统给文件打的标签而已。<br>只要让 gmod 觉得这个 .ain 的修改时间晚于 .bsp 的修改时间即可。<br>可以把 .bsp 改早，也可以把 .ain 改晚。<br>我们可以用 Powershell 指令快速改时间：   </p>\n<figure class=\"highlight pwsh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs pwsh\"><span class=\"hljs-comment\"># 修改为当前电脑时间</span><br>(<span class=\"hljs-built_in\">Get-Item</span> <span class=\"hljs-string\">&quot;.\\fff.ain&quot;</span>).LastWriteTime = (<span class=\"hljs-built_in\">Get-Date</span>) <br><span class=\"hljs-comment\"># 修改为任意指定时间。</span><br>(<span class=\"hljs-built_in\">Get-Item</span> <span class=\"hljs-string\">&quot;.\\fff.ain&quot;</span>).LastWriteTime = (<span class=\"hljs-built_in\">Get-Date</span> <span class=\"hljs-string\">&quot;2039-12-19&quot;</span>) <br></code></pre></td></tr></table></figure>\n\n<p>但是不管怎么做，都意味着，我们需要自己备份 .ain 文件，<br>指不定这个游戏又觉得 .bsp 更新了或者没有禁用自动生成参数又给我覆盖了。   </p>\n",
            "tags": [
                "gmod"
            ]
        },
        {
            "id": "http://buyi.dev/2024/toolbar-app/",
            "url": "http://buyi.dev/2024/toolbar-app/",
            "title": "Buyi Toolbar",
            "date_published": "2024-11-15T10:10:56.000Z",
            "content_html": "<p>解决 windows 11 砍掉的任务栏-工具栏功能。<br>支持文件夹嵌套。   </p>\n<p>运行库： .NET Framework 4.8   </p>\n<p>启动办法： 把指定文件夹作为启动项参数的第一个。如果带空格需要带双引号。   </p>\n<p>cmd 启动示例：</p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs cmd\"><span class=\"hljs-built_in\">start</span> &quot;&quot; &quot;BuyiToolbar.exe&quot; &quot;C:\\Users\\Buyi\\Apps&quot;<br></code></pre></td></tr></table></figure>\n\n<p>源码： <a href=\"https://github.com/chenbuyi2019/Buyi-Toolbar\">github</a>   </p>\n<p>效果截图：<br><img src=\"/image/buyi_toolbar.webp\">  </p>\n",
            "tags": [
                "code",
                ".net"
            ]
        },
        {
            "id": "http://buyi.dev/2024/cs2-console-fix-pos/",
            "url": "http://buyi.dev/2024/cs2-console-fix-pos/",
            "title": "反恐精英2：控制台飘太远了怎么办",
            "date_published": "2024-11-04T10:33:15.000Z",
            "content_html": "<p>该死的 Valve ，如果你在使用 Counter-Strike 2 的控制台的时候，<br>不小心拖拽控制台窗口拖到了游戏界面的外面去。<br>尤其是最顶上或者最下面。<br>你就很可能再也拖拽不回来了。    </p>\n<p>解决办法：<br>先关闭游戏，<br>找到自己的 steam 好友编码，<br>然后去 <code>steam安装目录/userdata/好友编码/730/local/cfg</code> 这个文件夹，<br>找到 <code>cs2_machine_convars.vcfg</code> 这个配置文件，用代码编辑器或记事本打开。  </p>\n<p>在里面搜索 <code>panorama_console_position_and_size</code> ，找到后把这一行删掉，保存修改。<br>因为这一行是存储着控制台的位置和大小。   </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs cfg\">&quot;panorama_console_position_and_size&quot;\t\t&quot;253.20|-22.80|1052.40|300.00&quot;<br></code></pre></td></tr></table></figure>\n\n<p>现在重启游戏，就是恢复默认的控制台大小了。   </p>\n",
            "tags": [
                "cs2"
            ]
        },
        {
            "id": "http://buyi.dev/2024/cs2-client-log-parse/",
            "url": "http://buyi.dev/2024/cs2-client-log-parse/",
            "title": "反恐精英2：我是怎么掉线的",
            "date_published": "2024-09-16T09:38:58.000Z",
            "content_html": "<p>司马 Valve 给 Counter-Strike 2 更新了个啥玩意之后，玩家从服务器掉线就不知道理由了。<br>本来应该写掉线理由的框变成了个空白框。   </p>\n<p>特地做此工具，用来解析游戏控制台日志，从而知道掉线给的是啥理由。   </p>\n<p>请在掉线后，全选复制你的控制台日志，然后粘贴到这里，并点击解析。  </p>\n<div>\n\n<textarea id=\"txtInput\">\n</textarea>\n\n<p><button id=\"btnParse\">解析</button></p>\n<div id=\"divResult\">\n</div>\n\n<script src=\"/script/cs2-client-log-parse.js\"></script>\n\n</div>\n\n<p>源码<a href=\"https://github.com/chenbuyi2019/blog2309/blob/master/script/cs2-client-log-parse/main.ts\">点我</a>。   </p>\n",
            "tags": [
                "code",
                "cs2"
            ]
        },
        {
            "id": "http://buyi.dev/2024/mulit-cmd/",
            "url": "http://buyi.dev/2024/mulit-cmd/",
            "title": "ConEmu: 一次性启动和托管多个控制台程序",
            "date_published": "2024-08-25T11:15:48.000Z",
            "content_html": "<p>我写了好多软件都是控制台程序，让它们在 windows 任务栏里晃来晃去不是个好主意。<br>在实际工作中，我需要一个软件来托管这些控制台程序。   </p>\n<p>我选择了 <a href=\"https://conemu.github.io/\">ConEmu</a> 来解决这个问题，我用它来实现：   </p>\n<ol>\n<li>把各个控制台窗口变成标签页</li>\n<li>一次性打开多个控制台程序</li>\n<li>防误触关闭窗口，有个关闭前对话框</li>\n</ol>\n<p>具体就不展开讲了，非常易用的一个控制台 UI 软件。   </p>\n<p>一次性打开多个控制台程序需要使用以下启动参数：   </p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs cmd\">ConEmu64.exe -runlist ^&gt;  <span class=\"hljs-built_in\">cmd</span> /k &quot;D:\\a.exe&quot; ^|^|^| <span class=\"hljs-built_in\">cmd</span> /k &quot;D:\\b.exe&quot; ^|^|^| <span class=\"hljs-built_in\">cmd</span> /k &quot;D:\\c.exe&quot;  <br></code></pre></td></tr></table></figure>\n\n<p><code>cmd /k </code> 的好处是支持在标签页里 ctrl+C 然后保留这个标签页。   </p>\n<p>或者不套 cmd 来执行   </p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs cmd\">ConEmu64.exe -runlist ^&gt; &quot;D:\\a.exe&quot; ^|^|^| &quot;D:\\b.exe&quot; ^|^|^| &quot;D:\\c.exe&quot;  <br></code></pre></td></tr></table></figure>\n\n<p>你说为什么不用 Windows Terminal ，答案是服务器的 windows 不方便安装 windows store app  。<br>而且 ConEmu 还支持把现有的控制台窗口 attach 塞进去。   </p>\n",
            "tags": [
                "code"
            ]
        },
        {
            "id": "http://buyi.dev/2024/gmod-lua-utf8sub/",
            "url": "http://buyi.dev/2024/gmod-lua-utf8sub/",
            "title": "GMod Lua utf8.sub 性能问题",
            "date_published": "2024-08-04T16:00:00.000Z",
            "content_html": "<p>我本来在做一个简易的日志输出，日志字符串达到一定长度之后，就把字符串裁切只留下后面一半。<br>我不经意间使用了 <code>utf8.sub()</code> 来裁，然后我发现游戏过程中莫名其妙就卡顿几十秒，然后就恢复，也不像是我哪里有逻辑死循环。<br>经过反复 <code>print()</code> 来找卡顿的实际位置，我终于找到了原因，就是这个 log 裁切的问题。  </p>\n<p>Gmod Wiki 里说 <a href=\"https://wiki.facepunch.com/gmod/utf8.sub\">utf8.sub()</a> 比较吃性能，不要在逐帧运行的部分里使用。<br>可我没想到你这性能问题这么大啊。   </p>\n<p>下面是测试代码和测试结果：   </p>\n<figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs lua\">concommand.Add(<br>    <span class=\"hljs-string\">&quot;test1&quot;</span>,<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">()</span></span><br>        <span class=\"hljs-keyword\">local</span> t1 = SysTime()<br>        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;start&quot;</span>)<br>        <span class=\"hljs-keyword\">local</span> str1 = <span class=\"hljs-string\">&quot;&quot;</span><br>        <span class=\"hljs-keyword\">for</span> i = <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">199</span> <span class=\"hljs-keyword\">do</span><br>            str1 = str1 .. <span class=\"hljs-string\">&quot;甲甲甲abc abc== 123456123 甲甲甲 abc 123456123甲甲&quot;</span><br>        <span class=\"hljs-keyword\">end</span><br><br>        <span class=\"hljs-keyword\">local</span> t2 = SysTime()<br>        <span class=\"hljs-built_in\">print</span>(Format(<span class=\"hljs-string\">&quot;拼字符串 用时 %.3f  文本长度: %d %d&quot;</span>, t2 - t1, #str1, utf8.<span class=\"hljs-built_in\">len</span>(str1)))<br>        <span class=\"hljs-keyword\">local</span> str2 = <span class=\"hljs-built_in\">string</span>.<span class=\"hljs-built_in\">sub</span>(str1, <span class=\"hljs-number\">9999</span>)<br>        <span class=\"hljs-keyword\">local</span> t3 = SysTime()<br>        <span class=\"hljs-built_in\">print</span>(Format(<span class=\"hljs-string\">&quot;string.sub 用时 %.3f  文本长度: %d&quot;</span>, t3 - t2, #str2))<br>        <span class=\"hljs-keyword\">local</span> str3 = utf8.<span class=\"hljs-built_in\">sub</span>(str1, <span class=\"hljs-number\">5000</span>)<br>        <span class=\"hljs-keyword\">local</span> t4 = SysTime()<br>        <span class=\"hljs-built_in\">print</span>(Format(<span class=\"hljs-string\">&quot;utf8.sub 用时 %.3f  文本长度: %d&quot;</span>, t4 - t3, #str3))<br>    <span class=\"hljs-keyword\">end</span><br>)<br><br><span class=\"hljs-comment\">-- 本地单人游戏 intel i7-12650H</span><br><span class=\"hljs-comment\">-- start</span><br><span class=\"hljs-comment\">-- 拼字符串 用时 0.000  文本长度: 11542 8358</span><br><span class=\"hljs-comment\">-- string.sub 用时 0.000  文本长度: 1544</span><br><span class=\"hljs-comment\">-- utf8.sub 用时 10.642  文本长度: 4637</span><br></code></pre></td></tr></table></figure>\n\n<p>8358 个字符（11542 字节）的字符串裁掉一半就要花 10 秒。<br>这也 tmd 太慢了吧。   </p>\n<p><code>string.sub()</code> 是像切割 byte[] 一样切割字符串， <code>utf8.sub()</code> 是先把字符串拆成一个个 utf8 字符，然后再组。<br>非必要不使用，还是老老实实用 <code>string.sub</code> 吧，开头有两个乱码字符没什么大不了的（   </p>\n",
            "tags": [
                "code",
                "gmod"
            ]
        },
        {
            "id": "http://buyi.dev/2024/cs2-player-states/",
            "url": "http://buyi.dev/2024/cs2-player-states/",
            "title": "Counter-Strike 2 玩家进服退服时的状态一览",
            "date_published": "2024-07-21T05:16:06.000Z",
            "content_html": "<p>本文使用的是 CounterStrikeSharp 和 CS2Fixes 搭配进行的研究。<br>用于确定反恐精英2里玩家进出服务器时候的状态。   </p>\n<p>主要还是因为玩家的状态太迷惑了。<br>从连接服务器到进入服务器，再到完成 steam 验证，再到退出服务器，再到重新连接服务器。<br>（玩家退服之后 Controller 实体还在，就很神奇）   </p>\n<p>合理识别这些玩家状态很重要，因为对状态不正常的玩家进行操作会导致出错甚至崩溃。   </p>\n<style>\n    .green {\n        color: green;\n    }\n    .red {\n        color: red;\n    }\n</style>\n\n<p>注意，下表中的 <code>OnClientAuthorized</code> 的顺序位置仅供参考，因为实际中网络不畅时，玩家验证可能很迟才发生。   </p>\n<table style=\"font-size:small;\">\n    <thead>\n    <tr>\n        <td>情况</td>\n        <td>Controller</td>\n        <td>Connected</td>\n        <td>UserId</td>\n        <td>PrintToConsole</td>\n        <td>PlayerPawn</td>\n    </tr>\n    </thead>\n    <tbody>\n    <tr>\n        <td>第1次进<br>OnClientConnect</td>\n        <td>null</td>\n        <td>无</td>\n        <td>无</td>\n        <td>不测试</td>\n        <td>null</td>\n    </tr>\n    <tr>\n        <td>第1次进<br>OnClientConnected</td>\n        <td>Valid</td>\n        <td>PlayerConnecting</td>\n        <td>0</td>\n        <td>OK</td>\n        <td>null</td>\n    </tr>\n    <tr>\n        <td>第1次进<br>OnClientAuthorized</td>\n        <td>Valid</td>\n        <td>PlayerConnecting</td>\n        <td>0</td>\n        <td>OK</td>\n        <td>null</td>\n    </tr>\n    <tr>\n        <td>第1次进<br>OnClientPutInServer</td>\n        <td>Valid</td>\n        <td>PlayerConnecting</td>\n        <td>0</td>\n        <td>OK</td>\n        <td>Valid</td>\n    </tr>\n    <tr>\n        <td>第1次进<br>OnClientPutInServer<br>之后第1帧</td>\n        <td>Valid</td>\n        <td class=\"green\">PlayerConnected</td>\n        <td>0</td>\n        <td>OK</td>\n        <td>Valid</td>\n    </tr>\n    <tr>\n        <td>第1次退<br>OnClientDisconnect</td>\n        <td>Valid</td>\n        <td class=\"green\">PlayerConnected</td>\n        <td>0</td>\n        <td>执行，但玩家收不到</td>\n        <td>Valid</td>\n    </tr>\n    <tr>\n        <td>第1次退<br>OnClientDisconnectPost</td>\n        <td>Valid</td>\n        <td>PlayerDisconnected</td>\n        <td>0</td>\n        <td>执行，但玩家收不到</td>\n        <td>Valid</td>\n    </tr>\n    <tr>\n        <td>第1次退<br>OnClientDisconnectPost<br>之后第1帧</td>\n        <td>Valid</td>\n        <td>PlayerDisconnected</td>\n        <td>65535</td>\n        <td>执行后服务端崩溃</td>\n        <td>可能是null</td>\n    </tr>\n    <tr>\n        <td>第2次进<br>OnClientConnect</td>\n        <td>Valid</td>\n        <td>PlayerDisconnected</td>\n        <td>0</td>\n        <td>OK</td>\n        <td>Valid</td>\n    </tr>\n    <tr>\n        <td>第2次进<br>OnClientConnected</td>\n        <td>Valid</td>\n        <td>PlayerReconnecting</td>\n        <td>0</td>\n        <td>OK</td>\n        <td>Valid</td>\n    </tr>\n    <tr>\n        <td>第2次进<br>OnClientAuthorized</td>\n        <td>Valid</td>\n        <td>PlayerReconnecting</td>\n        <td>0</td>\n        <td>OK</td>\n        <td>Valid</td>\n    </tr>\n    <tr>\n        <td>第2次进<br>OnClientPutInServer</td>\n        <td>Valid</td>\n        <td>PlayerReconnecting</td>\n        <td>0</td>\n        <td>OK</td>\n        <td>Valid</td>\n    </tr>\n    <tr>\n        <td>第2次进<br>OnClientPutInServer<br>之后第1帧</td>\n        <td>Valid</td>\n        <td class=\"green\">PlayerConnected</td>\n        <td>0</td>\n        <td>OK</td>\n        <td>Valid</td>\n    </tr>\n    <tr>\n        <td>第2次退<br>OnClientDisconnect</td>\n        <td>Valid</td>\n        <td class=\"green\">PlayerConnected</td>\n        <td>0</td>\n        <td>执行，但玩家收不到</td>\n        <td>Valid</td>\n    </tr>\n    <tr>\n        <td>第2次退<br>OnClientDisconnectPost</td>\n        <td>Valid</td>\n        <td>PlayerDisconnected</td>\n        <td>0</td>\n        <td>执行，但玩家收不到</td>\n        <td>Valid</td>\n    </tr>\n    <tr>\n        <td>第2次退<br>OnClientDisconnectPost<br>之后第1帧</td>\n        <td>Valid</td>\n        <td>PlayerDisconnected</td>\n        <td>65535</td>\n        <td>执行后服务端崩溃</td>\n        <td>可能是null</td>\n    </tr>\n    </tbody>\n</table>\n\n<p><code>PrintToConsole</code> 的服务端崩溃表现为：   </p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs cmd\">Fatal error. System.AccessViolationException: Attempted to read or write protected memory. This is often an indication that other memory is corrupt.<br><br>   <span class=\"hljs-built_in\">at</span> CounterStrikeSharp.API.Core.Helpers.InvokeNative(IntPtr)<br> <br>   <span class=\"hljs-built_in\">at</span> CounterStrikeSharp.API.Core.ScriptContext.InvokeNativeInternal()<br>   <span class=\"hljs-built_in\">at</span> CounterStrikeSharp.API.Core.ScriptContext.Invoke()<br>   <span class=\"hljs-built_in\">at</span> CounterStrikeSharp.API.Core.NativeAPI.PrintToConsole(Int32, System.String)<br>   <span class=\"hljs-built_in\">at</span> CounterStrikeSharp.API.Core.CCSPlayerController.PrintToConsole(System.String)<br></code></pre></td></tr></table></figure>\n\n<p>总结：  </p>\n<ol>\n<li>玩家控制器就算是 <code>.IsValid</code> ，依然不可靠，需要检测 <code>.Connected</code> 和 <code>.UserId</code> 。  </li>\n<li><code>.PrintToConsole</code> 需要特别小心的使用，BOT 玩家和离线玩家使用这个函数都会导致崩服。   </li>\n<li><code>OnClientPutInServer</code> 可以在大部分情况下使用，作为玩家进服的检测点，但是里面的玩家状态依然不是 <code>PlayerConnected</code> ，它的下一帧才是。</li>\n</ol>\n",
            "tags": [
                "cs2"
            ]
        },
        {
            "id": "http://buyi.dev/2024/ffmpeg-ps1-source/",
            "url": "http://buyi.dev/2024/ffmpeg-ps1-source/",
            "title": "PowerShell 脚本: ffmpeg 批量压缩音频",
            "date_published": "2024-07-14T13:20:03.000Z",
            "content_html": "<p>前置需求：   </p>\n<ul>\n<li>在环境 PATH 路径里有 <a href=\"https://ffmpeg.org/\">ffmpeg</a> 程序  </li>\n<li>使用 <a href=\"https://github.com/PowerShell/PowerShell\">PowerShell 7+</a>  </li>\n<li>我自己是在 Windows 11 运行， Linux 应该也能跑</li>\n</ul>\n<p>我自己经常会遇到打包在不同文件夹结构里的各式音频文件，<br>需要将它们压缩为统一格式的起源、起源2引擎适用的音频格式。<br>所以写了这个脚本。   </p>\n<p>把需要转换的音频文件放入一个文件夹里，<br>把文件夹路径作为脚本的第一个参数执行。一般就是拖入控制台窗口或者拖到ps1图标上直接执行。<br>压缩好的 MP3 会输出到输入文件夹上层的 compress_xxx 文件夹里。<br>里面的子文件夹结构和文件名会保留下来。   </p>\n<p>不得不说，这一下 shell 语法，一下 c# 语法感觉就是怪。  </p>\n<figure class=\"highlight ps1\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs ps1\"><span class=\"hljs-variable\">$dir</span> = <span class=\"hljs-variable\">$args</span>[<span class=\"hljs-number\">0</span>]<br><br><span class=\"hljs-variable\">$ErrorActionPreference</span> = <span class=\"hljs-string\">&#x27;Stop&#x27;</span><br><br><span class=\"hljs-keyword\">if</span> (<span class=\"hljs-operator\">-not</span> (<span class=\"hljs-built_in\">Test-Path</span> <span class=\"hljs-variable\">$dir</span> <span class=\"hljs-literal\">-PathType</span> Container)) &#123;<br>    <span class=\"hljs-built_in\">Write-Error</span> <span class=\"hljs-string\">&quot;你输入的文件夹不存在 <span class=\"hljs-variable\">$dir</span>&quot;</span><br>&#125;<br><br><span class=\"hljs-variable\">$dir</span> = [<span class=\"hljs-type\">System.IO.Path</span>]::GetFullPath(<span class=\"hljs-variable\">$dir</span>)<br><span class=\"hljs-built_in\">Write-Host</span> <span class=\"hljs-string\">&quot;输入文件夹 <span class=\"hljs-variable\">$dir</span>&quot;</span><br><span class=\"hljs-variable\">$tm</span> = <span class=\"hljs-built_in\">Get-Date</span> <span class=\"hljs-literal\">-Format</span> <span class=\"hljs-string\">&quot;HH-mm-ss&quot;</span><br><span class=\"hljs-variable\">$dir2</span> = [<span class=\"hljs-type\">System.IO.Path</span>]::Combine(<span class=\"hljs-variable\">$dir</span>, <span class=\"hljs-string\">&quot;../&quot;</span>, <span class=\"hljs-string\">&quot;compress_<span class=\"hljs-variable\">$tm</span>&quot;</span>)<br><span class=\"hljs-variable\">$dir2</span> = [<span class=\"hljs-type\">System.IO.Path</span>]::GetFullPath(<span class=\"hljs-variable\">$dir2</span>)<br><span class=\"hljs-built_in\">Write-Host</span> <span class=\"hljs-string\">&quot;输出文件夹 <span class=\"hljs-variable\">$dir2</span>&quot;</span><br><span class=\"hljs-keyword\">if</span> (<span class=\"hljs-built_in\">Test-Path</span> <span class=\"hljs-variable\">$dir2</span> <span class=\"hljs-literal\">-PathType</span> Container) &#123;<br>    <span class=\"hljs-built_in\">Write-Error</span> <span class=\"hljs-string\">&quot;输出文件夹已经存在了，需要更换 <span class=\"hljs-variable\">$dir2</span>&quot;</span><br>&#125;<br><br><span class=\"hljs-variable\">$allowedExt</span> = <span class=\"hljs-selector-tag\">@</span>(<span class=\"hljs-string\">&quot;.wav&quot;</span>, <span class=\"hljs-string\">&quot;.mp3&quot;</span>, <span class=\"hljs-string\">&quot;.m4a&quot;</span>, <span class=\"hljs-string\">&quot;.mp4&quot;</span>, <span class=\"hljs-string\">&quot;.ogg&quot;</span>)<br><br><span class=\"hljs-variable\">$inputs</span> = <span class=\"hljs-built_in\">Get-ChildItem</span> <span class=\"hljs-variable\">$dir</span> <span class=\"hljs-literal\">-Filter</span> <span class=\"hljs-string\">&quot;*&quot;</span> <span class=\"hljs-literal\">-Recurse</span><br><span class=\"hljs-variable\">$count</span> = <span class=\"hljs-number\">0</span><br><br><span class=\"hljs-keyword\">foreach</span> (<span class=\"hljs-variable\">$input</span> <span class=\"hljs-keyword\">in</span> <span class=\"hljs-variable\">$inputs</span>) &#123;  <br>    <span class=\"hljs-variable\">$ext</span> = <span class=\"hljs-variable\">$input</span>.Extension.ToLower()<br>    <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-variable\">$allowedExt</span>.Contains(<span class=\"hljs-variable\">$ext</span>)) &#123; <span class=\"hljs-keyword\">continue</span> &#125;<br>    <span class=\"hljs-variable\">$relPath</span> = [<span class=\"hljs-type\">System.IO.Path</span>]::GetRelativePath(<span class=\"hljs-variable\">$dir</span>, <span class=\"hljs-variable\">$input</span>.FullName)<br>    <span class=\"hljs-variable\">$outputFile</span> = [<span class=\"hljs-type\">System.IO.Path</span>]::Combine(<span class=\"hljs-variable\">$dir2</span>, <span class=\"hljs-variable\">$relPath</span>)<br>    <span class=\"hljs-variable\">$outputFile</span> = [<span class=\"hljs-type\">System.IO.Path</span>]::ChangeExtension(<span class=\"hljs-variable\">$outputFile</span>, <span class=\"hljs-string\">&quot;.mp3&quot;</span>)<br>    <span class=\"hljs-variable\">$dir3</span> = [<span class=\"hljs-type\">System.IO.Path</span>]::GetDirectoryName(<span class=\"hljs-variable\">$OutputFile</span>)<br>    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-operator\">-not</span> (<span class=\"hljs-built_in\">Test-Path</span> <span class=\"hljs-variable\">$dir3</span> <span class=\"hljs-literal\">-PathType</span> Container)) &#123;<br>        <span class=\"hljs-built_in\">New-Item</span> <span class=\"hljs-variable\">$dir3</span> <span class=\"hljs-literal\">-ItemType</span> Directory<br>    &#125;<br>    <span class=\"hljs-built_in\">Write-Host</span> <span class=\"hljs-variable\">$outputFile</span> <br>    ffmpeg <span class=\"hljs-literal\">-i</span> <span class=\"hljs-variable\">$input</span>.FullName <span class=\"hljs-literal\">-y</span> <span class=\"hljs-literal\">-c</span>:a libmp3lame <span class=\"hljs-literal\">-ar</span> <span class=\"hljs-number\">44100</span> <span class=\"hljs-literal\">-b</span>:a <span class=\"hljs-number\">96</span>k <span class=\"hljs-variable\">$outputFile</span> <br>    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-operator\">-not</span>(<span class=\"hljs-built_in\">Test-Path</span> <span class=\"hljs-variable\">$outputFile</span> <span class=\"hljs-literal\">-PathType</span> Leaf)) &#123;<br>        <span class=\"hljs-built_in\">Write-Error</span> <span class=\"hljs-string\">&quot;找不到压缩的音频文件 <span class=\"hljs-variable\">$outputFile</span>&quot;</span><br>    &#125;<br>    <span class=\"hljs-variable\">$count</span> += <span class=\"hljs-number\">1</span><br>&#125;<br><br><span class=\"hljs-built_in\">Write-Host</span> <span class=\"hljs-string\">&quot;工作完成，一共 <span class=\"hljs-variable\">$count</span> 个文件 &quot;</span><br><span class=\"hljs-built_in\">Write-Host</span> <span class=\"hljs-string\">&quot;输出文件夹 <span class=\"hljs-variable\">$dir2</span>&quot;</span><br><br><span class=\"hljs-comment\"># 批量修改音量： -filter: &quot;volume = 8dB&quot;  </span><br></code></pre></td></tr></table></figure>\n",
            "tags": [
                "code",
                "cs2"
            ]
        },
        {
            "id": "http://buyi.dev/2024/games/",
            "url": "http://buyi.dev/2024/games/",
            "title": "布衣玩通关且没作弊的游戏",
            "date_published": "2024-07-04T12:07:22.000Z",
            "content_html": "<p>记录一下我玩到单人剧情通关，并且没有作弊的游戏。<br>不求高难度也不求百分百全成就全解锁，能不作弊通关已经很开心了（<br>纯剧情解密类就不算了，可以看攻略作弊的（   </p>\n<h1 id=\"Grand-Theft-Auto\"><a href=\"#Grand-Theft-Auto\" class=\"headerlink\" title=\"Grand Theft Auto\"></a>Grand Theft Auto</h1><p>2017 年 4 月 7 日，通关了 GTA 5 。<br>2022 年 1 月 29 日，通关了 GTA 4 本体。<br>2022 年 8 月 17 日，通关了 The Ballad of Gay Tony 。<br>2022 年 10 月 1 日，通关了 The Lost and Damned 。<br>2024 年 7 月 4 日，通关了 GTA III - The Definitive Edition <a href=\"https://m.weibo.cn/status/Om1RkzUwy\">微博</a> 。<br>2024 年 7 月 30 日，通关了 GTA Vice City – The Definitive Edition <a href=\"https://m.weibo.cn/status/OpYfvxpV0\">微博</a>  。<br>2024 年 8 月 20 日，通关了 GTA San Andreas – The Definitive Edition <a href=\"https://m.weibo.cn/status/OtcsQqGa6\">微博</a>  。    </p>\n<p>2025 年 11 月 22 日， Grand Theft Auto V Enhanced 达成 100% 完成度。<a href=\"https://m.weibo.cn/status/QeL3a9NCn\">微博</a>   </p>\n<h1 id=\"Devil-May-Cry-5\"><a href=\"#Devil-May-Cry-5\" class=\"headerlink\" title=\"Devil May Cry 5\"></a>Devil May Cry 5</h1><p>2022 年 10月 22日。   </p>\n<h1 id=\"Red-Alert-2\"><a href=\"#Red-Alert-2\" class=\"headerlink\" title=\"Red Alert 2\"></a>Red Alert 2</h1><p>2023 年 7 月 7 日，红色警戒2 本体 <a href=\"https://m.weibo.cn/status/N8M945xzX\">微博</a><br>2023 年 7 月 12 日，尤里的复仇 苏军线 <a href=\"https://m.weibo.cn/status/N9yHy2Qn7\">微博</a><br>2024 年 8 月 7 日，尤里的复仇 盟军线 <a href=\"https://m.weibo.cn/status/OrdHv3p2N\">微博</a>   </p>\n<h1 id=\"Red-Alert-1\"><a href=\"#Red-Alert-1\" class=\"headerlink\" title=\"Red Alert 1\"></a>Red Alert 1</h1><p>2024 年 1 月 24 日，红色警戒1 苏军线  <a href=\"https://m.weibo.cn/status/NDlcGjaYP\">微博</a><br>2024 年 8 月 27 日，红色警戒1 盟军线  <a href=\"https://m.weibo.cn/status/OufZq8Apg\">微博</a>   </p>\n<h1 id=\"Half-Life-1\"><a href=\"#Half-Life-1\" class=\"headerlink\" title=\"Half-Life 1\"></a>Half-Life 1</h1><p>2023 年 1 月 25 日，<a href=\"https://m.weibo.cn/status/MpXEugiJj\">微博</a>   </p>\n<h1 id=\"Need-For-Speed\"><a href=\"#Need-For-Speed\" class=\"headerlink\" title=\"Need For Speed\"></a>Need For Speed</h1><p>2024 年 7 月 11 日，极品飞车 9 最高通缉 NFS Most Wanted。<br><a href=\"https://m.weibo.cn/status/On4zlaVrf\">微博</a>   </p>\n<h1 id=\"Cyberpunk-2077\"><a href=\"#Cyberpunk-2077\" class=\"headerlink\" title=\"Cyberpunk 2077\"></a>Cyberpunk 2077</h1><p>2025 年 12 月 30 日， <a href=\"https://m.weibo.cn/status/QkQ4vlFDp\">主线</a><br>2026 年 1 月 22 日， DLC <a href=\"https://m.weibo.cn/status/QoiaBb69M\">往日之影</a>  </p>\n<h1 id=\"Call-Of-Duty\"><a href=\"#Call-Of-Duty\" class=\"headerlink\" title=\"Call Of Duty\"></a>Call Of Duty</h1><p>2026 年 2 月 12 日， Modern Warfare® Remastered (2017) （4的重制版） <a href=\"https://m.weibo.cn/status/QrwrEqzH4\">微博</a><br>2026 年 2 月 18 日， Modern Warfare 2 （也就是6） <a href=\"https://m.weibo.cn/status/QsqI1DF0H\">微博</a>  </p>\n<h1 id=\"Mafia-四海兄弟\"><a href=\"#Mafia-四海兄弟\" class=\"headerlink\" title=\"Mafia 四海兄弟\"></a>Mafia 四海兄弟</h1><p>2026 年 2 月 15 日， <a href=\"https://m.weibo.cn/status/QrYHFeAw7\">四海兄弟: 最终版</a>  </p>\n<h1 id=\"ICEY\"><a href=\"#ICEY\" class=\"headerlink\" title=\"ICEY\"></a>ICEY</h1><p>2017 年 8 月 2 日。   </p>\n<h1 id=\"Homefront\"><a href=\"#Homefront\" class=\"headerlink\" title=\"Homefront\"></a>Homefront</h1><p>2021 年 9 月 20 日。  </p>\n<h1 id=\"Max-Payne-3\"><a href=\"#Max-Payne-3\" class=\"headerlink\" title=\"Max Payne 3\"></a>Max Payne 3</h1><p>2021 年 10 月 9 日。   </p>\n<h1 id=\"不记得具体时间的\"><a href=\"#不记得具体时间的\" class=\"headerlink\" title=\"不记得具体时间的\"></a>不记得具体时间的</h1><ul>\n<li>Minecraft: Java Edition  </li>\n<li>Devil May Cry 4   </li>\n<li>Hitman: Absolution</li>\n<li>Half-Life 2 </li>\n<li>Half-Life 2: Episode One   </li>\n<li>Half-Life 2: Episode Two  </li>\n<li>Counter-Strike: Condition Zero Deleted Scenes</li>\n<li>Sleeping Dogs: Definitive Edition</li>\n<li>Battlefield 1 </li>\n<li>Battlefield 4</li>\n</ul>\n",
            "tags": [
                "游戏"
            ]
        },
        {
            "id": "http://buyi.dev/2024/lets-encrypt-dns/",
            "url": "http://buyi.dev/2024/lets-encrypt-dns/",
            "title": "使用 DNS 记录通过 certbot 认证",
            "date_published": "2024-07-02T12:33:35.000Z",
            "content_html": "<p>由于我自己写的一些网站都没法直接兼容 Let’s Encrypt <a href=\"https://certbot.eff.org/\">certbot</a> 的普通的认证方式。<br>我更倾向于使用 DNS TXT 认证来完成域名验证过程。<br>好处就是根本不需要一台公网服务器，有台电脑就行。也不用干预正在运行的服务器。<br>坏处就是每次等 DNS 解析有点难等，一旦时机没把握好就得重来。    </p>\n<figure class=\"highlight jboss-cli\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs jboss-cli\">certbot certonly <span class=\"hljs-params\">--preferred-challenges</span> dns -d <span class=\"hljs-string\">&quot;*.abcd.com&quot;</span> -d <span class=\"hljs-string\">&quot;abcd.com&quot;</span> <span class=\"hljs-params\">--manual</span><br></code></pre></td></tr></table></figure>\n\n<p>（其实更多是因为我要申请 *.abcd.com 这样的证书，而我不好直接操作 abcd.com 主页服务器。   </p>\n",
            "tags": [
                "code"
            ]
        },
        {
            "id": "http://buyi.dev/2024/cs2-disconnect-reasons/",
            "url": "http://buyi.dev/2024/cs2-disconnect-reasons/",
            "title": "Counter-Strike 2 玩家离线理由中文对照表",
            "date_published": "2024-04-10T00:56:22.000Z",
            "content_html": "<p>注释里的文本大部分来自 <code>csgo/pak01_dir.vpk</code> 里的 <code>resource/csgo_schinese.txt</code><br>参考原文： <a href=\"https://github.com/alliedmodders/hl2sdk/blob/cs2/common/network_connection.proto\">hl2sdk-cs2</a>   </p>\n<div>\n<table>\n<tr>\n    <td>0</td>\n    <td>INVALID</td>\n    <td>（无弹窗）</td>\n</tr>\n<tr>\n    <td>1</td>\n    <td>SHUTDOWN</td>\n    <td>（无弹窗）</td>\n</tr>\n<tr>\n    <td>2</td>\n    <td>DISCONNECT_BY_USER</td>\n    <td>（无弹窗，玩家主动离开）</td>\n</tr>\n<tr>\n    <td>3</td>\n    <td>DISCONNECT_BY_SERVER</td>\n    <td>服务器断开连接。</td>\n</tr>\n<tr>\n    <td>4</td>\n    <td>LOST</td>\n    <td>连接丢失。</td>\n</tr>\n<tr>\n    <td>5</td>\n    <td>OVERFLOW</td>\n    <td>溢出错误</td>\n</tr>\n<tr>\n    <td>6</td>\n    <td>STEAM_BANNED</td>\n    <td>STEAM用户ID被封禁</td>\n</tr>\n<tr>\n    <td>7</td>\n    <td>STEAM_INUSE</td>\n    <td>STEAM用户ID已在此服务器上使用</td>\n</tr>\n<tr>\n    <td>8</td>\n    <td>STEAM_TICKET</td>\n    <td>来自STEAM用户ID的工单无效</td>\n</tr>\n<tr>\n    <td>9</td>\n    <td>STEAM_LOGON</td>\n    <td>需要Steam以加入游戏。请检查您到Steam的连接并重试。</td>\n</tr>\n<tr>\n    <td>10</td>\n    <td>STEAM_AUTHCANCELLED</td>\n    <td>没有Steam登录</td>\n</tr>\n<tr>\n    <td>11</td>\n    <td>STEAM_AUTHALREADYUSED</td>\n    <td>没有Steam登录</td>\n</tr>\n<tr>\n    <td>12</td>\n    <td>STEAM_AUTHINVALID</td>\n    <td>没有Steam登录</td>\n</tr>\n<tr>\n    <td>13</td>\n    <td>STEAM_VACBANSTATE</td>\n    <td>VAC已被安全服务器封禁</td>\n</tr>\n<tr>\n    <td>14</td>\n    <td>STEAM_LOGGED_IN_ELSEWHERE</td>\n    <td>此帐户当前正在另一台机器上登录到Steam。\\n请稍后再试。</td>\n</tr>\n<tr>\n    <td>15</td>\n    <td>STEAM_VAC_CHECK_TIMEDOUT</td>\n    <td>您不能在安全服务器上玩游戏的可能原因如下：•您的电脑出现问题，阻止了VAC系统。•您无法与VAC系统保持稳定连接。•您运行的软件在修改游戏或与VAC不兼容。更多信息</td>\n</tr>\n<tr>\n    <td>16</td>\n    <td>STEAM_DROPPED</td>\n    <td>Steam认证失败。您必须连接到Steam才能初始化到游戏服务器。</td>\n</tr>\n<tr>\n    <td>17</td>\n    <td>STEAM_OWNERSHIP</td>\n    <td>这个Steam帐户并未拥有该游戏。请用正确的Steam帐户登录。</td>\n</tr>\n<tr>\n    <td>18</td>\n    <td>SERVERINFO_OVERFLOW</td>\n    <td>信息数据溢出</td>\n</tr>\n<tr>\n    <td>19</td>\n    <td>TICKMSG_OVERFLOW</td>\n    <td>?</td>\n</tr>\n<tr>\n    <td>20</td>\n    <td>STRINGTABLEMSG_OVERFLOW</td>\n    <td>?</td>\n</tr>\n<tr>\n    <td>21</td>\n    <td>DELTAENTMSG_OVERFLOW</td>\n    <td>?</td>\n</tr>\n<tr>\n    <td>22</td>\n    <td>TEMPENTMSG_OVERFLOW</td>\n    <td>?</td>\n</tr>\n<tr>\n    <td>23</td>\n    <td>SOUNDSMSG_OVERFLOW</td>\n    <td>?</td>\n</tr>\n<tr>\n    <td>24</td>\n    <td>SNAPSHOTOVERFLOW</td>\n    <td>可靠的快照溢出错误</td>\n</tr>\n<tr>\n    <td>25</td>\n    <td>SNAPSHOTERROR</td>\n    <td>发送快照时出错</td>\n</tr>\n<tr>\n    <td>26</td>\n    <td>RELIABLEOVERFLOW</td>\n    <td>可靠的缓冲溢出错误</td>\n</tr>\n<tr>\n    <td>27</td>\n    <td>BADDELTATICK</td>\n    <td>客户端增量标记故障</td>\n</tr>\n<tr>\n    <td>28</td>\n    <td>NOMORESPLITS</td>\n    <td>没有更多的扩散槽位</td>\n</tr>\n<tr>\n    <td>29</td>\n    <td>TIMEDOUT</td>\n    <td>无法与游戏服务器建立连接。</td>\n</tr>\n<tr>\n    <td>30</td>\n    <td>DISCONNECTED</td>\n    <td>远程主机关闭了连接。</td>\n</tr>\n<tr>\n    <td>31</td>\n    <td>LEAVINGSPLIT</td>\n    <td>扩散槽位已断开</td>\n</tr>\n<tr>\n    <td>32</td>\n    <td>DIFFERENTCLASSTABLES</td>\n    <td>服务器端使用不同的类表。</td>\n</tr>\n<tr>\n    <td>33</td>\n    <td>BADRELAYPASSWORD</td>\n    <td>中继密码错误</td>\n</tr>\n<tr>\n    <td>34</td>\n    <td>BADSPECTATORPASSWORD</td>\n    <td>观察者密码错误</td>\n</tr>\n<tr>\n    <td>35</td>\n    <td>HLTVRESTRICTED</td>\n    <td>SourceTV服务器仅限本地观察者（C类）</td>\n</tr>\n<tr>\n    <td>36</td>\n    <td>NOSPECTATORS</td>\n    <td>比赛不允许观战。</td>\n</tr>\n<tr>\n    <td>37</td>\n    <td>HLTVUNAVAILABLE</td>\n    <td>没有可用的SourceTV中继站</td>\n</tr>\n<tr>\n    <td>38</td>\n    <td>HLTVSTOP</td>\n    <td>SourceTV停止</td>\n</tr>\n<tr>\n    <td>39</td>\n    <td>KICKED</td>\n    <td>被服务器踢出。</td>\n</tr>\n<tr>\n    <td>40</td>\n    <td>BANADDED</td>\n    <td>已加入封禁名单</td>\n</tr>\n<tr>\n    <td>41</td>\n    <td>KICKBANADDED</td>\n    <td>已被踢出并封禁</td>\n</tr>\n<tr>\n    <td>42</td>\n    <td>HLTVDIRECT</td>\n    <td>SourceTV无法直接连接至游戏。</td>\n</tr>\n<tr>\n    <td>43</td>\n    <td>PURESERVER_CLIENTEXTRA</td>\n    <td>纯服务器：客户端加载了额外文件。</td>\n</tr>\n<tr>\n    <td>44</td>\n    <td>PURESERVER_MISMATCH</td>\n    <td>纯服务器：客户端文件与服务器不匹配。</td>\n</tr>\n<tr>\n    <td>45</td>\n    <td>USERCMD</td>\n    <td>解析用户指令错误。</td>\n</tr>\n<tr>\n    <td>46</td>\n    <td>REJECTED_BY_GAME</td>\n    <td>连接被游戏拒绝。</td>\n</tr>\n<tr>\n    <td>47</td>\n    <td>MESSAGE_PARSE_ERROR</td>\n    <td>解析消息失败。</td>\n</tr>\n<tr>\n    <td>48</td>\n    <td>INVALID_MESSAGE_ERROR</td>\n    <td>消息无效。</td>\n</tr>\n<tr>\n    <td>49</td>\n    <td>BAD_SERVER_PASSWORD</td>\n    <td>服务器密码错误</td>\n</tr>\n<tr>\n    <td>50</td>\n    <td>DIRECT_CONNECT_RESERVATION</td>\n    <td>（这会在客户端留下一个空白的确认窗口）</td>\n</tr>\n<tr>\n    <td>51</td>\n    <td>CONNECTION_FAILURE</td>\n    <td>连接失败</td>\n</tr>\n<tr>\n    <td>52</td>\n    <td>NO_PEER_GROUP_HANDLERS</td>\n    <td>缺少连接对等组</td>\n</tr>\n<tr>\n    <td>53</td>\n    <td>RECONNECTION</td>\n    <td>（这会在客户端留下一个空白的确认窗口）</td>\n</tr>\n<tr>\n    <td>54</td>\n    <td>LOOPSHUTDOWN</td>\n    <td>循环关闭。</td>\n</tr>\n<tr>\n    <td>55</td>\n    <td>LOOPDEACTIVATE</td>\n    <td>循环已失效。</td>\n</tr>\n<tr>\n    <td>56</td>\n    <td>HOST_ENDGAME</td>\n    <td>游戏由主机结束。</td>\n</tr>\n<tr>\n    <td>57</td>\n    <td>LOOP_LEVELLOAD_ACTIVATE</td>\n    <td>循环等级加载已生效。</td>\n</tr>\n<tr>\n    <td>58</td>\n    <td>CREATE_SERVER_FAILED</td>\n    <td>创建服务器失败。</td>\n</tr>\n<tr>\n    <td>59</td>\n    <td>EXITING</td>\n    <td>关闭游戏。（玩家quit指令会触发）</td>\n</tr>\n<tr>\n    <td>60</td>\n    <td>REQUEST_HOSTSTATE_IDLE</td>\n    <td>主机空闲中。</td>\n</tr>\n<tr>\n    <td>61</td>\n    <td>REQUEST_HOSTSTATE_HLTVRELAY</td>\n    <td>主机是中继站。</td>\n</tr>\n<tr>\n    <td>62</td>\n    <td>CLIENT_CONSISTENCY_FAIL</td>\n    <td>客户端一致性检查失败。</td>\n</tr>\n<tr>\n    <td>63</td>\n    <td>CLIENT_UNABLE_TO_CRC_MAP</td>\n    <td>客户端地图验证失败。</td>\n</tr>\n<tr>\n    <td>64</td>\n    <td>CLIENT_NO_MAP</td>\n    <td>您的客户端上缺少所需的地图。</td>\n</tr>\n<tr>\n    <td>65</td>\n    <td>CLIENT_DIFFERENT_MAP</td>\n    <td>您的地图版本与服务器不同。</td>\n</tr>\n<tr>\n    <td>66</td>\n    <td>SERVER_REQUIRES_STEAM</td>\n    <td>客户端和服务器必须连接到Steam。</td>\n</tr>\n<tr>\n    <td>67</td>\n    <td>STEAM_DENY_MISC</td>\n    <td>服务器连接被Steam拒绝。</td>\n</tr>\n<tr>\n    <td>68</td>\n    <td>STEAM_DENY_BAD_ANTI_CHEAT</td>\n    <td>服务器连接被VAC拒绝。</td>\n</tr>\n<tr>\n    <td>69</td>\n    <td>SERVER_SHUTDOWN</td>\n    <td>从游戏服务器断开。游戏服务器正在关机。</td>\n</tr>\n<tr>\n    <td>71</td>\n    <td>REPLAY_INCOMPATIBLE</td>\n    <td>不兼容回放。</td>\n</tr>\n<tr>\n    <td>72</td>\n    <td>CONNECT_REQUEST_TIMEDOUT</td>\n    <td>无法与游戏服务器建立连接。</td>\n</tr>\n<tr>\n    <td>73</td>\n    <td>SERVER_INCOMPATIBLE</td>\n    <td>服务器版本不兼容。</td>\n</tr>\n<tr>\n    <td>74</td>\n    <td>LOCALPROBLEM_MANYRELAYS</td>\n    <td>连接断开，此前已尝试连接不同地区的多个中继服务器，您的网络连接很可能出现问题。</td>\n</tr>\n<tr>\n    <td>75</td>\n    <td>LOCALPROBLEM_HOSTEDSERVERPRIMARYRELAY</td>\n    <td>游戏服务器与客户端使用的主中继服务器失去连接。</td>\n</tr>\n<tr>\n    <td>76</td>\n    <td>LOCALPROBLEM_NETWORKCONFIG</td>\n    <td>请检查网络连接。无法从CDN下载网络配置文件。</td>\n</tr>\n<tr>\n    <td>77</td>\n    <td>LOCALPROBLEM_OTHER</td>\n    <td>已断开连接。可能是本地的网络连接出现问题。</td>\n</tr>\n<tr>\n    <td>79</td>\n    <td>REMOTE_TIMEOUT</td>\n    <td>游戏已停止从远程主机接收通讯。</td>\n</tr>\n<tr>\n    <td>80</td>\n    <td>REMOTE_TIMEOUT_CONNECTING</td>\n    <td>已数次尝试连接，但服务器没有响应。</td>\n</tr>\n<tr>\n    <td>81</td>\n    <td>REMOTE_OTHER</td>\n    <td>已数次尝试连接，但服务器没有响应。</td>\n</tr>\n<tr>\n    <td>82</td>\n    <td>REMOTE_BADCRYPT</td>\n    <td>远程主机的证书不正确或配置错误。</td>\n</tr>\n<tr>\n    <td>83</td>\n    <td>REMOTE_CERTNOTTRUSTED</td>\n    <td>远程主机的证书不能用于验证。</td>\n</tr>\n<tr>\n    <td>84</td>\n    <td>UNUSUAL</td>\n    <td>已断开连接。出现特殊情况。控制台可能会有更多详情。</td>\n</tr>\n<tr>\n    <td>85</td>\n    <td>INTERNAL_ERROR</td>\n    <td>由于内部错误，已断开连接。控制台可能会有更多详情。</td>\n</tr>\n<tr>\n    <td>128</td>\n    <td>REJECT_BADCHALLENGE</td>\n    <td>服务器拒绝了错误的挑战数据包。</td>\n</tr>\n<tr>\n    <td>129</td>\n    <td>REJECT_NOLOBBY</td>\n    <td>服务器没有托管游戏大厅。</td>\n</tr>\n<tr>\n    <td>130</td>\n    <td>REJECT_BACKGROUND_MAP</td>\n    <td>服务器正在运行背景图。</td>\n</tr>\n<tr>\n    <td>131</td>\n    <td>REJECT_SINGLE_PLAYER</td>\n    <td>服务器正在运行单人游戏。</td>\n</tr>\n<tr>\n    <td>132</td>\n    <td>REJECT_HIDDEN_GAME</td>\n    <td>服务器正在运行隐藏游戏。</td>\n</tr>\n<tr>\n    <td>133</td>\n    <td>REJECT_LANRESTRICT</td>\n    <td>服务器仅限局域网游戏。</td>\n</tr>\n<tr>\n    <td>134</td>\n    <td>REJECT_BADPASSWORD</td>\n    <td>密码错误被服务器拒绝。</td>\n</tr>\n<tr>\n    <td>135</td>\n    <td>REJECT_SERVERFULL</td>\n    <td>服务器已满。</td>\n</tr>\n<tr>\n    <td>136</td>\n    <td>REJECT_INVALIDRESERVATION</td>\n    <td>服务器预留无效。</td>\n</tr>\n<tr>\n    <td>137</td>\n    <td>REJECT_FAILEDCHANNEL</td>\n    <td>网络信道不良被服务器拒绝。</td>\n</tr>\n<tr>\n    <td>138</td>\n    <td>REJECT_CONNECT_FROM_LOBBY</td>\n    <td>服务器需要客户端从游戏大厅连接。</td>\n</tr>\n<tr>\n    <td>139</td>\n    <td>REJECT_RESERVED_FOR_LOBBY</td>\n    <td>服务器已预留给游戏大厅。</td>\n</tr>\n<tr>\n    <td>140</td>\n    <td>REJECT_INVALIDKEYLENGTH</td>\n    <td>无效游戏序列号被服务器拒绝。</td>\n</tr>\n<tr>\n    <td>141</td>\n    <td>REJECT_OLDPROTOCOL</td>\n    <td>您的客户端已过期。</td>\n</tr>\n<tr>\n    <td>142</td>\n    <td>REJECT_NEWPROTOCOL</td>\n    <td>服务器已过期。</td>\n</tr>\n<tr>\n    <td>143</td>\n    <td>REJECT_INVALIDCONNECTION</td>\n    <td>无效连接被服务器拒绝。</td>\n</tr>\n<tr>\n    <td>144</td>\n    <td>REJECT_INVALIDCERTLEN</td>\n    <td>无效的客户端证书被服务器拒绝。</td>\n</tr>\n<tr>\n    <td>145</td>\n    <td>REJECT_INVALIDSTEAMCERTLEN</td>\n    <td>无效的Steam证书被服务器拒绝。</td>\n</tr>\n<tr>\n    <td>146</td>\n    <td>REJECT_STEAM</td>\n    <td>Steam拒绝了您与服务器的连接。</td>\n</tr>\n<tr>\n    <td>147</td>\n    <td>REJECT_SERVERAUTHDISABLED</td>\n    <td>服务器认证已禁用。</td>\n</tr>\n<tr>\n    <td>148</td>\n    <td>REJECT_SERVERCDKEYAUTHINVALID</td>\n    <td>游戏序列号验证被服务器拒绝。</td>\n</tr>\n<tr>\n    <td>149</td>\n    <td>REJECT_BANNED</td>\n    <td>您的客户端不允许加入此服务器。</td>\n</tr>\n<tr>\n    <td>150</td>\n    <td>KICKED_TEAMKILLING</td>\n    <td>因杀害了过多队友</td>\n</tr>\n<tr>\n    <td>151</td>\n    <td>KICKED_TK_START</td>\n    <td>因在开局时击杀了一名队友</td>\n</tr>\n<tr>\n    <td>152</td>\n    <td>KICKED_UNTRUSTEDACCOUNT</td>\n    <td>帐户处于“不可信”状态</td>\n</tr>\n<tr>\n    <td>153</td>\n    <td>KICKED_CONVICTEDACCOUNT</td>\n    <td>帐户被定罪</td>\n</tr>\n<tr>\n    <td>154</td>\n    <td>KICKED_COMPETITIVECOOLDOWN</td>\n    <td>玩家处于竞技匹配冷却状态</td>\n</tr>\n<tr>\n    <td>155</td>\n    <td>KICKED_TEAMHURTING</td>\n    <td>因过度攻击队友</td>\n</tr>\n<tr>\n    <td>156</td>\n    <td>KICKED_HOSTAGEKILLING</td>\n    <td>因杀害了过多人质</td>\n</tr>\n<tr>\n    <td>157</td>\n    <td>KICKED_VOTEDOFF</td>\n    <td>已被投票踢出</td>\n</tr>\n<tr>\n    <td>158</td>\n    <td>KICKED_IDLE</td>\n    <td>玩家处于空闲状态</td>\n</tr>\n<tr>\n    <td>159</td>\n    <td>KICKED_SUICIDE</td>\n    <td>因自杀次数过多</td>\n</tr>\n<tr>\n    <td>160</td>\n    <td>KICKED_NOSTEAMLOGIN</td>\n    <td>无效的用户登录</td>\n</tr>\n<tr>\n    <td>161</td>\n    <td>KICKED_NOSTEAMTICKET</td>\n    <td>游戏验证失败</td>\n</tr>\n</table>\n</div>\n\n",
            "tags": [
                "cs2"
            ]
        }
    ]
}