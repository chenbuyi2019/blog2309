{
    "version": "https://jsonfeed.org/version/1",
    "title": "陈布衣的博客",
    "description": "",
    "home_page_url": "http://buyi.dev",
    "items": [
        {
            "id": "http://buyi.dev/2024/cs2-client-log-parse/",
            "url": "http://buyi.dev/2024/cs2-client-log-parse/",
            "title": "反恐精英2：我是怎么掉线的",
            "date_published": "2024-09-16T09:38:58.000Z",
            "content_html": "<p>司马 Valve 给 Counter-Strike 2 更新了个啥玩意之后，玩家从服务器掉线就不知道理由了。<br>本来应该写掉线理由的框变成了个空白框。   </p>\n<p>特地做此工具，用来解析游戏控制台日志，从而知道掉线给的是啥理由。   </p>\n<p>请在掉线后，全选复制你的控制台日志，然后粘贴到这里，并点击解析。  </p>\n<div>\n\n<textarea id=\"txtInput\">\n</textarea>\n\n<p><button id=\"btnParse\">解析</button></p>\n<div id=\"divResult\">\n</div>\n\n<script src=\"/script/cs2-client-log-parse.js\"></script>\n\n</div>\n\n<p>源码<a href=\"https://github.com/chenbuyi2019/blog2309/blob/master/script/cs2-client-log-parse/main.ts\">点我</a>。   </p>\n",
            "tags": [
                "code",
                "cs2"
            ]
        },
        {
            "id": "http://buyi.dev/2024/mulit-cmd/",
            "url": "http://buyi.dev/2024/mulit-cmd/",
            "title": "ConEmu: 一次性启动和托管多个控制台程序",
            "date_published": "2024-08-25T11:15:48.000Z",
            "content_html": "<p>我写了好多软件都是控制台程序，让它们在 windows 任务栏里晃来晃去不是个好主意。<br>在实际工作中，我需要一个软件来托管这些控制台程序。   </p>\n<p>我选择了 <a href=\"https://conemu.github.io/\">ConEmu</a> 来解决这个问题，我用它来实现：   </p>\n<ol>\n<li>把各个控制台窗口变成标签页</li>\n<li>一次性打开多个控制台程序</li>\n<li>防误触关闭窗口，有个关闭前对话框</li>\n</ol>\n<p>具体就不展开讲了，非常易用的一个控制台 UI 软件。   </p>\n<p>一次性打开多个控制台程序需要使用以下启动参数：   </p>\n<pre><code class=\"cmd\">ConEmu64.exe -runlist ^&gt;  cmd /k &quot;D:\\a.exe&quot; ^|^|^| cmd /k &quot;D:\\b.exe&quot; ^|^|^| cmd /k &quot;D:\\c.exe&quot;  \n</code></pre>\n<p><code>cmd /k </code> 的好处是支持在标签页里 ctrl+C 然后保留这个标签页。   </p>\n<p>或者不套 cmd 来执行   </p>\n<pre><code class=\"cmd\">ConEmu64.exe -runlist ^&gt; &quot;D:\\a.exe&quot; ^|^|^| &quot;D:\\b.exe&quot; ^|^|^| &quot;D:\\c.exe&quot;  \n</code></pre>\n<p>你说为什么不用 Windows Terminal ，答案是服务器的 windows 不方便安装 windows store app  。<br>而且 ConEmu 还支持把现有的控制台窗口 attach 塞进去。   </p>\n",
            "tags": [
                "code"
            ]
        },
        {
            "id": "http://buyi.dev/2024/gmod-lua-utf8sub/",
            "url": "http://buyi.dev/2024/gmod-lua-utf8sub/",
            "title": "GMod Lua utf8.sub 性能问题",
            "date_published": "2024-08-04T16:00:00.000Z",
            "content_html": "<p>我本来在做一个简易的日志输出，日志字符串达到一定长度之后，就把字符串裁切只留下后面一半。<br>我不经意间使用了 <code>utf8.sub()</code> 来裁，然后我发现游戏过程中莫名其妙就卡顿几十秒，然后就恢复，也不像是我哪里有逻辑死循环。<br>经过反复 <code>print()</code> 来找卡顿的实际位置，我终于找到了原因，就是这个 log 裁切的问题。  </p>\n<p>Gmod Wiki 里说 <a href=\"https://wiki.facepunch.com/gmod/utf8.sub\">utf8.sub()</a> 比较吃性能，不要在逐帧运行的部分里使用。<br>可我没想到你这性能问题这么大啊。   </p>\n<p>下面是测试代码和测试结果：   </p>\n<pre><code class=\"lua\">concommand.Add(\n    &quot;test1&quot;,\n    function()\n        local t1 = SysTime()\n        print(&quot;start&quot;)\n        local str1 = &quot;&quot;\n        for i = 1, 199 do\n            str1 = str1 .. &quot;甲甲甲abc abc== 123456123 甲甲甲 abc 123456123甲甲&quot;\n        end\n\n        local t2 = SysTime()\n        print(Format(&quot;拼字符串 用时 %.3f  文本长度: %d %d&quot;, t2 - t1, #str1, utf8.len(str1)))\n        local str2 = string.sub(str1, 9999)\n        local t3 = SysTime()\n        print(Format(&quot;string.sub 用时 %.3f  文本长度: %d&quot;, t3 - t2, #str2))\n        local str3 = utf8.sub(str1, 5000)\n        local t4 = SysTime()\n        print(Format(&quot;utf8.sub 用时 %.3f  文本长度: %d&quot;, t4 - t3, #str3))\n    end\n)\n\n-- 本地单人游戏 intel i7-12650H\n-- start\n-- 拼字符串 用时 0.000  文本长度: 11542 8358\n-- string.sub 用时 0.000  文本长度: 1544\n-- utf8.sub 用时 10.642  文本长度: 4637\n</code></pre>\n<p>8358 个字符（11542 字节）的字符串裁掉一半就要花 10 秒。<br>这也 tmd 太慢了吧。   </p>\n<p><code>string.sub()</code> 是像切割 byte[] 一样切割字符串， <code>utf8.sub()</code> 是先把字符串拆成一个个 utf8 字符，然后再组。<br>非必要不使用，还是老老实实用 <code>string.sub</code> 吧，开头有两个乱码字符没什么大不了的（   </p>\n",
            "tags": [
                "code",
                "gmod",
                "lua"
            ]
        },
        {
            "id": "http://buyi.dev/2024/cs2-player-states/",
            "url": "http://buyi.dev/2024/cs2-player-states/",
            "title": "Counter-Strike 2 玩家进服退服时的状态一览",
            "date_published": "2024-07-21T05:16:06.000Z",
            "content_html": "<p>本文使用的是 CounterStrikeSharp 和 CS2Fixes 搭配进行的研究。<br>用于确定反恐精英2里玩家进出服务器时候的状态。   </p>\n<p>主要还是因为玩家的状态太迷惑了。<br>从连接服务器到进入服务器，再到完成 steam 验证，再到退出服务器，再到重新连接服务器。<br>（玩家退服之后 Controller 实体还在，就很神奇）   </p>\n<p>合理识别这些玩家状态很重要，因为对状态不正常的玩家进行操作会导致出错甚至崩溃。   </p>\n<style>\n    .green {\n        color: green;\n    }\n    .red {\n        color: red;\n    }\n</style>\n\n<p>注意，下表中的 <code>OnClientAuthorized</code> 的顺序位置仅供参考，因为实际中网络不畅时，玩家验证可能很迟才发生。   </p>\n<table style=\"font-size:small;\">\n    <thead>\n    <tr>\n        <td>情况</td>\n        <td>Controller</td>\n        <td>Connected</td>\n        <td>UserId</td>\n        <td>PrintToConsole</td>\n        <td>PlayerPawn</td>\n    </tr>\n    </thead>\n    <tbody>\n    <tr>\n        <td>第1次进<br>OnClientConnect</td>\n        <td>null</td>\n        <td>无</td>\n        <td>无</td>\n        <td>不测试</td>\n        <td>null</td>\n    </tr>\n    <tr>\n        <td>第1次进<br>OnClientConnected</td>\n        <td>Valid</td>\n        <td>PlayerConnecting</td>\n        <td>0</td>\n        <td>OK</td>\n        <td>null</td>\n    </tr>\n    <tr>\n        <td>第1次进<br>OnClientAuthorized</td>\n        <td>Valid</td>\n        <td>PlayerConnecting</td>\n        <td>0</td>\n        <td>OK</td>\n        <td>null</td>\n    </tr>\n    <tr>\n        <td>第1次进<br>OnClientPutInServer</td>\n        <td>Valid</td>\n        <td>PlayerConnecting</td>\n        <td>0</td>\n        <td>OK</td>\n        <td>Valid</td>\n    </tr>\n    <tr>\n        <td>第1次进<br>OnClientPutInServer<br>之后第1帧</td>\n        <td>Valid</td>\n        <td class=\"green\">PlayerConnected</td>\n        <td>0</td>\n        <td>OK</td>\n        <td>Valid</td>\n    </tr>\n    <tr>\n        <td>第1次退<br>OnClientDisconnect</td>\n        <td>Valid</td>\n        <td class=\"green\">PlayerConnected</td>\n        <td>0</td>\n        <td>执行，但玩家收不到</td>\n        <td>Valid</td>\n    </tr>\n    <tr>\n        <td>第1次退<br>OnClientDisconnectPost</td>\n        <td>Valid</td>\n        <td>PlayerDisconnected</td>\n        <td>0</td>\n        <td>执行，但玩家收不到</td>\n        <td>Valid</td>\n    </tr>\n    <tr>\n        <td>第1次退<br>OnClientDisconnectPost<br>之后第1帧</td>\n        <td>Valid</td>\n        <td>PlayerDisconnected</td>\n        <td>65535</td>\n        <td>执行后服务端崩溃</td>\n        <td>可能是null</td>\n    </tr>\n    <tr>\n        <td>第2次进<br>OnClientConnect</td>\n        <td>Valid</td>\n        <td>PlayerDisconnected</td>\n        <td>0</td>\n        <td>OK</td>\n        <td>Valid</td>\n    </tr>\n    <tr>\n        <td>第2次进<br>OnClientConnected</td>\n        <td>Valid</td>\n        <td>PlayerReconnecting</td>\n        <td>0</td>\n        <td>OK</td>\n        <td>Valid</td>\n    </tr>\n    <tr>\n        <td>第2次进<br>OnClientAuthorized</td>\n        <td>Valid</td>\n        <td>PlayerReconnecting</td>\n        <td>0</td>\n        <td>OK</td>\n        <td>Valid</td>\n    </tr>\n    <tr>\n        <td>第2次进<br>OnClientPutInServer</td>\n        <td>Valid</td>\n        <td>PlayerReconnecting</td>\n        <td>0</td>\n        <td>OK</td>\n        <td>Valid</td>\n    </tr>\n    <tr>\n        <td>第2次进<br>OnClientPutInServer<br>之后第1帧</td>\n        <td>Valid</td>\n        <td class=\"green\">PlayerConnected</td>\n        <td>0</td>\n        <td>OK</td>\n        <td>Valid</td>\n    </tr>\n    <tr>\n        <td>第2次退<br>OnClientDisconnect</td>\n        <td>Valid</td>\n        <td class=\"green\">PlayerConnected</td>\n        <td>0</td>\n        <td>执行，但玩家收不到</td>\n        <td>Valid</td>\n    </tr>\n    <tr>\n        <td>第2次退<br>OnClientDisconnectPost</td>\n        <td>Valid</td>\n        <td>PlayerDisconnected</td>\n        <td>0</td>\n        <td>执行，但玩家收不到</td>\n        <td>Valid</td>\n    </tr>\n    <tr>\n        <td>第2次退<br>OnClientDisconnectPost<br>之后第1帧</td>\n        <td>Valid</td>\n        <td>PlayerDisconnected</td>\n        <td>65535</td>\n        <td>执行后服务端崩溃</td>\n        <td>可能是null</td>\n    </tr>\n    </tbody>\n</table>\n\n<p><code>PrintToConsole</code> 的服务端崩溃表现为：   </p>\n<pre><code class=\"cmd\">Fatal error. System.AccessViolationException: Attempted to read or write protected memory. This is often an indication that other memory is corrupt.\n\n   at CounterStrikeSharp.API.Core.Helpers.InvokeNative(IntPtr)\n \n   at CounterStrikeSharp.API.Core.ScriptContext.InvokeNativeInternal()\n   at CounterStrikeSharp.API.Core.ScriptContext.Invoke()\n   at CounterStrikeSharp.API.Core.NativeAPI.PrintToConsole(Int32, System.String)\n   at CounterStrikeSharp.API.Core.CCSPlayerController.PrintToConsole(System.String)\n</code></pre>\n<p>总结：  </p>\n<ol>\n<li>玩家控制器就算是 <code>.IsValid</code> ，依然不可靠，需要检测 <code>.Connected</code> 和 <code>.UserId</code> 。  </li>\n<li><code>.PrintToConsole</code> 需要特别小心的使用，BOT 玩家和离线玩家使用这个函数都会导致崩服。   </li>\n<li><code>OnClientPutInServer</code> 可以在大部分情况下使用，作为玩家进服的检测点，但是里面的玩家状态依然不是 <code>PlayerConnected</code> ，它的下一帧才是。</li>\n</ol>\n",
            "tags": [
                "cs2"
            ]
        },
        {
            "id": "http://buyi.dev/2024/ffmpeg-ps1-source/",
            "url": "http://buyi.dev/2024/ffmpeg-ps1-source/",
            "title": "PowerShell 脚本: ffmpeg 批量压缩音频",
            "date_published": "2024-07-14T13:20:03.000Z",
            "content_html": "<p>前置需求：   </p>\n<ul>\n<li>在环境 PATH 路径里有 <a href=\"https://ffmpeg.org/\">ffmpeg</a> 程序  </li>\n<li>使用 <a href=\"https://github.com/PowerShell/PowerShell\">PowerShell 7+</a>  </li>\n<li>我自己是在 Windows 11 运行， Linux 应该也能跑</li>\n</ul>\n<p>我自己经常会遇到打包在不同文件夹结构里的各式音频文件，<br>需要将它们压缩为统一格式的起源、起源2引擎适用的音频格式。<br>所以写了这个脚本。   </p>\n<p>把需要转换的音频文件放入一个文件夹里，<br>把文件夹路径作为脚本的第一个参数执行。一般就是拖入控制台窗口或者拖到ps1图标上直接执行。<br>压缩好的 MP3 会输出到输入文件夹上层的 compress_xxx 文件夹里。<br>里面的子文件夹结构和文件名会保留下来。   </p>\n<p>不得不说，这一下 shell 语法，一下 c# 语法感觉就是怪。  </p>\n<pre><code class=\"ps1\">$dir = $args[0]\n\n$ErrorActionPreference = &#39;Stop&#39;\n\nif (-not (Test-Path $dir -PathType Container)) &#123;\n    Write-Error &quot;你输入的文件夹不存在 $dir&quot;\n&#125;\n\n$dir = [System.IO.Path]::GetFullPath($dir)\nWrite-Host &quot;输入文件夹 $dir&quot;\n$tm = Get-Date -Format &quot;HH-mm-ss&quot;\n$dir2 = [System.IO.Path]::Combine($dir, &quot;../&quot;, &quot;compress_$tm&quot;)\n$dir2 = [System.IO.Path]::GetFullPath($dir2)\nWrite-Host &quot;输出文件夹 $dir2&quot;\nif (Test-Path $dir2 -PathType Container) &#123;\n    Write-Error &quot;输出文件夹已经存在了，需要更换 $dir2&quot;\n&#125;\n\n$allowedExt = @(&quot;.wav&quot;, &quot;.mp3&quot;, &quot;.m4a&quot;, &quot;.mp4&quot;, &quot;.ogg&quot;)\n\n$inputs = Get-ChildItem $dir -Filter &quot;*&quot; -Recurse\n$count = 0\n\nforeach ($input in $inputs) &#123;  \n    $ext = $input.Extension.ToLower()\n    if (!$allowedExt.Contains($ext)) &#123; continue &#125;\n    $relPath = [System.IO.Path]::GetRelativePath($dir, $input.FullName)\n    $outputFile = [System.IO.Path]::Combine($dir2, $relPath)\n    $outputFile = [System.IO.Path]::ChangeExtension($outputFile, &quot;.mp3&quot;)\n    $dir3 = [System.IO.Path]::GetDirectoryName($OutputFile)\n    if (-not (Test-Path $dir3 -PathType Container)) &#123;\n        New-Item $dir3 -ItemType Directory\n    &#125;\n    Write-Host $outputFile \n    ffmpeg -i $input.FullName -y -c:a libmp3lame -ar 44100 -b:a 96k $outputFile \n    if (-not(Test-Path $outputFile -PathType Leaf)) &#123;\n        Write-Error &quot;找不到压缩的音频文件 $outputFile&quot;\n    &#125;\n    $count += 1\n&#125;\n\nWrite-Host &quot;工作完成，一共 $count 个文件 &quot;\nWrite-Host &quot;输出文件夹 $dir2&quot;\n\n# 批量修改音量： -filter: &quot;volume = 8dB&quot;  \n</code></pre>\n",
            "tags": [
                "code",
                "cs2"
            ]
        },
        {
            "id": "http://buyi.dev/2024/games/",
            "url": "http://buyi.dev/2024/games/",
            "title": "布衣玩通关且没作弊的游戏",
            "date_published": "2024-07-04T12:07:22.000Z",
            "content_html": "<p>记录一下我玩到单人剧情通关，并且没有作弊的游戏。<br>不求高难度也不求百分百全成就全解锁，能不作弊通关已经很开心了（<br>纯剧情解密类就不算了，可以看攻略作弊的（   </p>\n<h1 id=\"Grand-Theft-Auto\"><a href=\"#Grand-Theft-Auto\" class=\"headerlink\" title=\"Grand Theft Auto\"></a>Grand Theft Auto</h1><p>2017 年 4 月 7 日，通关了 GTA 5 。<br>2022 年 1 月 29 日，通关了 GTA 4 本体。<br>2022 年 8 月 17 日，通关了 The Ballad of Gay Tony 。<br>2022 年 10 月 1 日，通关了 The Lost and Damned 。<br>2024 年 7 月 4 日，通关了 GTA III - The Definitive Edition <a href=\"https://m.weibo.cn/status/Om1RkzUwy\">微博</a> 。<br>2024 年 7 月 30 日，通关了 GTA Vice City – The Definitive Edition <a href=\"https://m.weibo.cn/status/OpYfvxpV0\">微博</a>  。<br>2024 年 8 月 20 日，通关了 GTA San Andreas – The Definitive Edition <a href=\"https://m.weibo.cn/status/OtcsQqGa6\">微博</a>  。    </p>\n<h1 id=\"Devil-May-Cry-5\"><a href=\"#Devil-May-Cry-5\" class=\"headerlink\" title=\"Devil May Cry 5\"></a>Devil May Cry 5</h1><p>2022 年 10月 22日。   </p>\n<h1 id=\"ICEY\"><a href=\"#ICEY\" class=\"headerlink\" title=\"ICEY\"></a>ICEY</h1><p>2017 年 8 月 2 日。   </p>\n<h1 id=\"Homefront\"><a href=\"#Homefront\" class=\"headerlink\" title=\"Homefront\"></a>Homefront</h1><p>2021 年 9 月 20 日。  </p>\n<h1 id=\"Max-Payne-3\"><a href=\"#Max-Payne-3\" class=\"headerlink\" title=\"Max Payne 3\"></a>Max Payne 3</h1><p>2021 年 10 月 9 日。   </p>\n<h1 id=\"Red-Alert-2\"><a href=\"#Red-Alert-2\" class=\"headerlink\" title=\"Red Alert 2\"></a>Red Alert 2</h1><p>2023 年 7 月 7 日，红色警戒2 本体 <a href=\"https://m.weibo.cn/status/N8M945xzX\">微博</a><br>2023 年 7 月 12 日，尤里的复仇 苏军线 <a href=\"https://m.weibo.cn/status/N9yHy2Qn7\">微博</a><br>2024 年 8 月 7 日，尤里的复仇 盟军线 <a href=\"https://m.weibo.cn/status/OrdHv3p2N\">微博</a>   </p>\n<h1 id=\"Red-Alert-1\"><a href=\"#Red-Alert-1\" class=\"headerlink\" title=\"Red Alert 1\"></a>Red Alert 1</h1><p>2024 年 1 月 24 日，红色警戒1 苏军线  <a href=\"https://m.weibo.cn/status/NDlcGjaYP\">微博</a><br>2024 年 8 月 27 日，红色警戒1 盟军线  <a href=\"https://m.weibo.cn/status/OufZq8Apg\">微博</a>   </p>\n<h1 id=\"Half-Life-1\"><a href=\"#Half-Life-1\" class=\"headerlink\" title=\"Half-Life 1\"></a>Half-Life 1</h1><p>2023 年 1 月 25 日，<a href=\"https://m.weibo.cn/status/MpXEugiJj\">微博</a>   </p>\n<h1 id=\"Need-For-Speed\"><a href=\"#Need-For-Speed\" class=\"headerlink\" title=\"Need For Speed\"></a>Need For Speed</h1><p>2024 年 7 月 11 日，极品飞车 9 最高通缉 NFS Most Wanted。<br><a href=\"https://m.weibo.cn/status/On4zlaVrf\">微博</a>   </p>\n<h1 id=\"不记得具体时间的\"><a href=\"#不记得具体时间的\" class=\"headerlink\" title=\"不记得具体时间的\"></a>不记得具体时间的</h1><ul>\n<li>Minecraft: Java Edition  </li>\n<li>Devil May Cry 4   </li>\n<li>Hitman: Absolution</li>\n<li>Half-Life 2 </li>\n<li>Half-Life 2: Episode One   </li>\n<li>Half-Life 2: Episode Two  </li>\n<li>Counter-Strike: Condition Zero Deleted Scenes</li>\n<li>Sleeping Dogs: Definitive Edition</li>\n<li>Battlefield 1 </li>\n<li>Battlefield 4</li>\n</ul>\n",
            "tags": [
                "游戏"
            ]
        },
        {
            "id": "http://buyi.dev/2024/lets-encrypt-dns/",
            "url": "http://buyi.dev/2024/lets-encrypt-dns/",
            "title": "使用 DNS 记录通过 certbot 认证",
            "date_published": "2024-07-02T12:33:35.000Z",
            "content_html": "<p>由于我自己写的一些网站都没法直接兼容 Let’s Encrypt <a href=\"https://certbot.eff.org/\">certbot</a> 的普通的认证方式。<br>我更倾向于使用 DNS TXT 认证来完成域名验证过程。<br>好处就是根本不需要一台公网服务器，有台电脑就行。也不用干预正在运行的服务器。<br>坏处就是每次等 DNS 解析有点难等，一旦时机没把握好就得重来。    </p>\n<pre><code>certbot certonly --preferred-challenges dns -d &quot;*.abcd.com&quot; -d &quot;abcd.com&quot; --manual\n</code></pre>\n<p>（其实更多是因为我要申请 *.abcd.com 这样的证书，而我不好直接操作 abcd.com 主页服务器。   </p>\n",
            "tags": [
                "code"
            ]
        },
        {
            "id": "http://buyi.dev/2024/cs2-disconnect-reasons/",
            "url": "http://buyi.dev/2024/cs2-disconnect-reasons/",
            "title": "Counter-Strike 2 玩家离线理由中文对照表",
            "date_published": "2024-04-10T00:56:22.000Z",
            "content_html": "<p>注释里的文本大部分来自 <code>csgo/pak01_dir.vpk</code> 里的 <code>resource/csgo_schinese.txt</code><br>参考原文： <a href=\"https://github.com/alliedmodders/hl2sdk/blob/cs2/common/network_connection.proto\">hl2sdk-cs2</a>   </p>\n<div>\n<table>\n<tr>\n    <td>0</td>\n    <td>INVALID</td>\n    <td>（无弹窗）</td>\n</tr>\n<tr>\n    <td>1</td>\n    <td>SHUTDOWN</td>\n    <td>（无弹窗）</td>\n</tr>\n<tr>\n    <td>2</td>\n    <td>DISCONNECT_BY_USER</td>\n    <td>（无弹窗，玩家主动离开）</td>\n</tr>\n<tr>\n    <td>3</td>\n    <td>DISCONNECT_BY_SERVER</td>\n    <td>服务器断开连接。</td>\n</tr>\n<tr>\n    <td>4</td>\n    <td>LOST</td>\n    <td>连接丢失。</td>\n</tr>\n<tr>\n    <td>5</td>\n    <td>OVERFLOW</td>\n    <td>溢出错误</td>\n</tr>\n<tr>\n    <td>6</td>\n    <td>STEAM_BANNED</td>\n    <td>STEAM用户ID被封禁</td>\n</tr>\n<tr>\n    <td>7</td>\n    <td>STEAM_INUSE</td>\n    <td>STEAM用户ID已在此服务器上使用</td>\n</tr>\n<tr>\n    <td>8</td>\n    <td>STEAM_TICKET</td>\n    <td>来自STEAM用户ID的工单无效</td>\n</tr>\n<tr>\n    <td>9</td>\n    <td>STEAM_LOGON</td>\n    <td>需要Steam以加入游戏。请检查您到Steam的连接并重试。</td>\n</tr>\n<tr>\n    <td>10</td>\n    <td>STEAM_AUTHCANCELLED</td>\n    <td>没有Steam登录</td>\n</tr>\n<tr>\n    <td>11</td>\n    <td>STEAM_AUTHALREADYUSED</td>\n    <td>没有Steam登录</td>\n</tr>\n<tr>\n    <td>12</td>\n    <td>STEAM_AUTHINVALID</td>\n    <td>没有Steam登录</td>\n</tr>\n<tr>\n    <td>13</td>\n    <td>STEAM_VACBANSTATE</td>\n    <td>VAC已被安全服务器封禁</td>\n</tr>\n<tr>\n    <td>14</td>\n    <td>STEAM_LOGGED_IN_ELSEWHERE</td>\n    <td>此帐户当前正在另一台机器上登录到Steam。\\n请稍后再试。</td>\n</tr>\n<tr>\n    <td>15</td>\n    <td>STEAM_VAC_CHECK_TIMEDOUT</td>\n    <td>您不能在安全服务器上玩游戏的可能原因如下：•您的电脑出现问题，阻止了VAC系统。•您无法与VAC系统保持稳定连接。•您运行的软件在修改游戏或与VAC不兼容。更多信息</td>\n</tr>\n<tr>\n    <td>16</td>\n    <td>STEAM_DROPPED</td>\n    <td>Steam认证失败。您必须连接到Steam才能初始化到游戏服务器。</td>\n</tr>\n<tr>\n    <td>17</td>\n    <td>STEAM_OWNERSHIP</td>\n    <td>这个Steam帐户并未拥有该游戏。请用正确的Steam帐户登录。</td>\n</tr>\n<tr>\n    <td>18</td>\n    <td>SERVERINFO_OVERFLOW</td>\n    <td>信息数据溢出</td>\n</tr>\n<tr>\n    <td>19</td>\n    <td>TICKMSG_OVERFLOW</td>\n    <td>?</td>\n</tr>\n<tr>\n    <td>20</td>\n    <td>STRINGTABLEMSG_OVERFLOW</td>\n    <td>?</td>\n</tr>\n<tr>\n    <td>21</td>\n    <td>DELTAENTMSG_OVERFLOW</td>\n    <td>?</td>\n</tr>\n<tr>\n    <td>22</td>\n    <td>TEMPENTMSG_OVERFLOW</td>\n    <td>?</td>\n</tr>\n<tr>\n    <td>23</td>\n    <td>SOUNDSMSG_OVERFLOW</td>\n    <td>?</td>\n</tr>\n<tr>\n    <td>24</td>\n    <td>SNAPSHOTOVERFLOW</td>\n    <td>可靠的快照溢出错误</td>\n</tr>\n<tr>\n    <td>25</td>\n    <td>SNAPSHOTERROR</td>\n    <td>发送快照时出错</td>\n</tr>\n<tr>\n    <td>26</td>\n    <td>RELIABLEOVERFLOW</td>\n    <td>可靠的缓冲溢出错误</td>\n</tr>\n<tr>\n    <td>27</td>\n    <td>BADDELTATICK</td>\n    <td>客户端增量标记故障</td>\n</tr>\n<tr>\n    <td>28</td>\n    <td>NOMORESPLITS</td>\n    <td>没有更多的扩散槽位</td>\n</tr>\n<tr>\n    <td>29</td>\n    <td>TIMEDOUT</td>\n    <td>无法与游戏服务器建立连接。</td>\n</tr>\n<tr>\n    <td>30</td>\n    <td>DISCONNECTED</td>\n    <td>远程主机关闭了连接。</td>\n</tr>\n<tr>\n    <td>31</td>\n    <td>LEAVINGSPLIT</td>\n    <td>扩散槽位已断开</td>\n</tr>\n<tr>\n    <td>32</td>\n    <td>DIFFERENTCLASSTABLES</td>\n    <td>服务器端使用不同的类表。</td>\n</tr>\n<tr>\n    <td>33</td>\n    <td>BADRELAYPASSWORD</td>\n    <td>中继密码错误</td>\n</tr>\n<tr>\n    <td>34</td>\n    <td>BADSPECTATORPASSWORD</td>\n    <td>观察者密码错误</td>\n</tr>\n<tr>\n    <td>35</td>\n    <td>HLTVRESTRICTED</td>\n    <td>SourceTV服务器仅限本地观察者（C类）</td>\n</tr>\n<tr>\n    <td>36</td>\n    <td>NOSPECTATORS</td>\n    <td>比赛不允许观战。</td>\n</tr>\n<tr>\n    <td>37</td>\n    <td>HLTVUNAVAILABLE</td>\n    <td>没有可用的SourceTV中继站</td>\n</tr>\n<tr>\n    <td>38</td>\n    <td>HLTVSTOP</td>\n    <td>SourceTV停止</td>\n</tr>\n<tr>\n    <td>39</td>\n    <td>KICKED</td>\n    <td>被服务器踢出。</td>\n</tr>\n<tr>\n    <td>40</td>\n    <td>BANADDED</td>\n    <td>已加入封禁名单</td>\n</tr>\n<tr>\n    <td>41</td>\n    <td>KICKBANADDED</td>\n    <td>已被踢出并封禁</td>\n</tr>\n<tr>\n    <td>42</td>\n    <td>HLTVDIRECT</td>\n    <td>SourceTV无法直接连接至游戏。</td>\n</tr>\n<tr>\n    <td>43</td>\n    <td>PURESERVER_CLIENTEXTRA</td>\n    <td>纯服务器：客户端加载了额外文件。</td>\n</tr>\n<tr>\n    <td>44</td>\n    <td>PURESERVER_MISMATCH</td>\n    <td>纯服务器：客户端文件与服务器不匹配。</td>\n</tr>\n<tr>\n    <td>45</td>\n    <td>USERCMD</td>\n    <td>解析用户指令错误。</td>\n</tr>\n<tr>\n    <td>46</td>\n    <td>REJECTED_BY_GAME</td>\n    <td>连接被游戏拒绝。</td>\n</tr>\n<tr>\n    <td>47</td>\n    <td>MESSAGE_PARSE_ERROR</td>\n    <td>解析消息失败。</td>\n</tr>\n<tr>\n    <td>48</td>\n    <td>INVALID_MESSAGE_ERROR</td>\n    <td>消息无效。</td>\n</tr>\n<tr>\n    <td>49</td>\n    <td>BAD_SERVER_PASSWORD</td>\n    <td>服务器密码错误</td>\n</tr>\n<tr>\n    <td>50</td>\n    <td>DIRECT_CONNECT_RESERVATION</td>\n    <td>（这会在客户端留下一个空白的确认窗口）</td>\n</tr>\n<tr>\n    <td>51</td>\n    <td>CONNECTION_FAILURE</td>\n    <td>连接失败</td>\n</tr>\n<tr>\n    <td>52</td>\n    <td>NO_PEER_GROUP_HANDLERS</td>\n    <td>缺少连接对等组</td>\n</tr>\n<tr>\n    <td>53</td>\n    <td>RECONNECTION</td>\n    <td>（这会在客户端留下一个空白的确认窗口）</td>\n</tr>\n<tr>\n    <td>54</td>\n    <td>LOOPSHUTDOWN</td>\n    <td>循环关闭。</td>\n</tr>\n<tr>\n    <td>55</td>\n    <td>LOOPDEACTIVATE</td>\n    <td>循环已失效。</td>\n</tr>\n<tr>\n    <td>56</td>\n    <td>HOST_ENDGAME</td>\n    <td>游戏由主机结束。</td>\n</tr>\n<tr>\n    <td>57</td>\n    <td>LOOP_LEVELLOAD_ACTIVATE</td>\n    <td>循环等级加载已生效。</td>\n</tr>\n<tr>\n    <td>58</td>\n    <td>CREATE_SERVER_FAILED</td>\n    <td>创建服务器失败。</td>\n</tr>\n<tr>\n    <td>59</td>\n    <td>EXITING</td>\n    <td>关闭游戏。（玩家quit指令会触发）</td>\n</tr>\n<tr>\n    <td>60</td>\n    <td>REQUEST_HOSTSTATE_IDLE</td>\n    <td>主机空闲中。</td>\n</tr>\n<tr>\n    <td>61</td>\n    <td>REQUEST_HOSTSTATE_HLTVRELAY</td>\n    <td>主机是中继站。</td>\n</tr>\n<tr>\n    <td>62</td>\n    <td>CLIENT_CONSISTENCY_FAIL</td>\n    <td>客户端一致性检查失败。</td>\n</tr>\n<tr>\n    <td>63</td>\n    <td>CLIENT_UNABLE_TO_CRC_MAP</td>\n    <td>客户端地图验证失败。</td>\n</tr>\n<tr>\n    <td>64</td>\n    <td>CLIENT_NO_MAP</td>\n    <td>您的客户端上缺少所需的地图。</td>\n</tr>\n<tr>\n    <td>65</td>\n    <td>CLIENT_DIFFERENT_MAP</td>\n    <td>您的地图版本与服务器不同。</td>\n</tr>\n<tr>\n    <td>66</td>\n    <td>SERVER_REQUIRES_STEAM</td>\n    <td>客户端和服务器必须连接到Steam。</td>\n</tr>\n<tr>\n    <td>67</td>\n    <td>STEAM_DENY_MISC</td>\n    <td>服务器连接被Steam拒绝。</td>\n</tr>\n<tr>\n    <td>68</td>\n    <td>STEAM_DENY_BAD_ANTI_CHEAT</td>\n    <td>服务器连接被VAC拒绝。</td>\n</tr>\n<tr>\n    <td>69</td>\n    <td>SERVER_SHUTDOWN</td>\n    <td>从游戏服务器断开。游戏服务器正在关机。</td>\n</tr>\n<tr>\n    <td>71</td>\n    <td>REPLAY_INCOMPATIBLE</td>\n    <td>不兼容回放。</td>\n</tr>\n<tr>\n    <td>72</td>\n    <td>CONNECT_REQUEST_TIMEDOUT</td>\n    <td>无法与游戏服务器建立连接。</td>\n</tr>\n<tr>\n    <td>73</td>\n    <td>SERVER_INCOMPATIBLE</td>\n    <td>服务器版本不兼容。</td>\n</tr>\n<tr>\n    <td>74</td>\n    <td>LOCALPROBLEM_MANYRELAYS</td>\n    <td>连接断开，此前已尝试连接不同地区的多个中继服务器，您的网络连接很可能出现问题。</td>\n</tr>\n<tr>\n    <td>75</td>\n    <td>LOCALPROBLEM_HOSTEDSERVERPRIMARYRELAY</td>\n    <td>游戏服务器与客户端使用的主中继服务器失去连接。</td>\n</tr>\n<tr>\n    <td>76</td>\n    <td>LOCALPROBLEM_NETWORKCONFIG</td>\n    <td>请检查网络连接。无法从CDN下载网络配置文件。</td>\n</tr>\n<tr>\n    <td>77</td>\n    <td>LOCALPROBLEM_OTHER</td>\n    <td>已断开连接。可能是本地的网络连接出现问题。</td>\n</tr>\n<tr>\n    <td>79</td>\n    <td>REMOTE_TIMEOUT</td>\n    <td>游戏已停止从远程主机接收通讯。</td>\n</tr>\n<tr>\n    <td>80</td>\n    <td>REMOTE_TIMEOUT_CONNECTING</td>\n    <td>已数次尝试连接，但服务器没有响应。</td>\n</tr>\n<tr>\n    <td>81</td>\n    <td>REMOTE_OTHER</td>\n    <td>已数次尝试连接，但服务器没有响应。</td>\n</tr>\n<tr>\n    <td>82</td>\n    <td>REMOTE_BADCRYPT</td>\n    <td>远程主机的证书不正确或配置错误。</td>\n</tr>\n<tr>\n    <td>83</td>\n    <td>REMOTE_CERTNOTTRUSTED</td>\n    <td>远程主机的证书不能用于验证。</td>\n</tr>\n<tr>\n    <td>84</td>\n    <td>UNUSUAL</td>\n    <td>已断开连接。出现特殊情况。控制台可能会有更多详情。</td>\n</tr>\n<tr>\n    <td>85</td>\n    <td>INTERNAL_ERROR</td>\n    <td>由于内部错误，已断开连接。控制台可能会有更多详情。</td>\n</tr>\n<tr>\n    <td>128</td>\n    <td>REJECT_BADCHALLENGE</td>\n    <td>服务器拒绝了错误的挑战数据包。</td>\n</tr>\n<tr>\n    <td>129</td>\n    <td>REJECT_NOLOBBY</td>\n    <td>服务器没有托管游戏大厅。</td>\n</tr>\n<tr>\n    <td>130</td>\n    <td>REJECT_BACKGROUND_MAP</td>\n    <td>服务器正在运行背景图。</td>\n</tr>\n<tr>\n    <td>131</td>\n    <td>REJECT_SINGLE_PLAYER</td>\n    <td>服务器正在运行单人游戏。</td>\n</tr>\n<tr>\n    <td>132</td>\n    <td>REJECT_HIDDEN_GAME</td>\n    <td>服务器正在运行隐藏游戏。</td>\n</tr>\n<tr>\n    <td>133</td>\n    <td>REJECT_LANRESTRICT</td>\n    <td>服务器仅限局域网游戏。</td>\n</tr>\n<tr>\n    <td>134</td>\n    <td>REJECT_BADPASSWORD</td>\n    <td>密码错误被服务器拒绝。</td>\n</tr>\n<tr>\n    <td>135</td>\n    <td>REJECT_SERVERFULL</td>\n    <td>服务器已满。</td>\n</tr>\n<tr>\n    <td>136</td>\n    <td>REJECT_INVALIDRESERVATION</td>\n    <td>服务器预留无效。</td>\n</tr>\n<tr>\n    <td>137</td>\n    <td>REJECT_FAILEDCHANNEL</td>\n    <td>网络信道不良被服务器拒绝。</td>\n</tr>\n<tr>\n    <td>138</td>\n    <td>REJECT_CONNECT_FROM_LOBBY</td>\n    <td>服务器需要客户端从游戏大厅连接。</td>\n</tr>\n<tr>\n    <td>139</td>\n    <td>REJECT_RESERVED_FOR_LOBBY</td>\n    <td>服务器已预留给游戏大厅。</td>\n</tr>\n<tr>\n    <td>140</td>\n    <td>REJECT_INVALIDKEYLENGTH</td>\n    <td>无效游戏序列号被服务器拒绝。</td>\n</tr>\n<tr>\n    <td>141</td>\n    <td>REJECT_OLDPROTOCOL</td>\n    <td>您的客户端已过期。</td>\n</tr>\n<tr>\n    <td>142</td>\n    <td>REJECT_NEWPROTOCOL</td>\n    <td>服务器已过期。</td>\n</tr>\n<tr>\n    <td>143</td>\n    <td>REJECT_INVALIDCONNECTION</td>\n    <td>无效连接被服务器拒绝。</td>\n</tr>\n<tr>\n    <td>144</td>\n    <td>REJECT_INVALIDCERTLEN</td>\n    <td>无效的客户端证书被服务器拒绝。</td>\n</tr>\n<tr>\n    <td>145</td>\n    <td>REJECT_INVALIDSTEAMCERTLEN</td>\n    <td>无效的Steam证书被服务器拒绝。</td>\n</tr>\n<tr>\n    <td>146</td>\n    <td>REJECT_STEAM</td>\n    <td>Steam拒绝了您与服务器的连接。</td>\n</tr>\n<tr>\n    <td>147</td>\n    <td>REJECT_SERVERAUTHDISABLED</td>\n    <td>服务器认证已禁用。</td>\n</tr>\n<tr>\n    <td>148</td>\n    <td>REJECT_SERVERCDKEYAUTHINVALID</td>\n    <td>游戏序列号验证被服务器拒绝。</td>\n</tr>\n<tr>\n    <td>149</td>\n    <td>REJECT_BANNED</td>\n    <td>您的客户端不允许加入此服务器。</td>\n</tr>\n<tr>\n    <td>150</td>\n    <td>KICKED_TEAMKILLING</td>\n    <td>因杀害了过多队友</td>\n</tr>\n<tr>\n    <td>151</td>\n    <td>KICKED_TK_START</td>\n    <td>因在开局时击杀了一名队友</td>\n</tr>\n<tr>\n    <td>152</td>\n    <td>KICKED_UNTRUSTEDACCOUNT</td>\n    <td>帐户处于“不可信”状态</td>\n</tr>\n<tr>\n    <td>153</td>\n    <td>KICKED_CONVICTEDACCOUNT</td>\n    <td>帐户被定罪</td>\n</tr>\n<tr>\n    <td>154</td>\n    <td>KICKED_COMPETITIVECOOLDOWN</td>\n    <td>玩家处于竞技匹配冷却状态</td>\n</tr>\n<tr>\n    <td>155</td>\n    <td>KICKED_TEAMHURTING</td>\n    <td>因过度攻击队友</td>\n</tr>\n<tr>\n    <td>156</td>\n    <td>KICKED_HOSTAGEKILLING</td>\n    <td>因杀害了过多人质</td>\n</tr>\n<tr>\n    <td>157</td>\n    <td>KICKED_VOTEDOFF</td>\n    <td>已被投票踢出</td>\n</tr>\n<tr>\n    <td>158</td>\n    <td>KICKED_IDLE</td>\n    <td>玩家处于空闲状态</td>\n</tr>\n<tr>\n    <td>159</td>\n    <td>KICKED_SUICIDE</td>\n    <td>因自杀次数过多</td>\n</tr>\n<tr>\n    <td>160</td>\n    <td>KICKED_NOSTEAMLOGIN</td>\n    <td>无效的用户登录</td>\n</tr>\n<tr>\n    <td>161</td>\n    <td>KICKED_NOSTEAMTICKET</td>\n    <td>游戏验证失败</td>\n</tr>\n</table>\n</div>\n\n",
            "tags": [
                "cs2"
            ]
        },
        {
            "id": "http://buyi.dev/2024/cs2-snd/",
            "url": "http://buyi.dev/2024/cs2-snd/",
            "title": "Counter-Strike 2 音频自定义编写与编译",
            "date_published": "2024-03-13T04:26:06.000Z",
            "content_html": "<h1 id=\"文件结构\"><a href=\"#文件结构\" class=\"headerlink\" title=\"文件结构\"></a>文件结构</h1><p>需要安装 cs2 workshop tools ，然后新建一个空白地图项目，比如叫 <code>xxxx</code>。<br>源文件放在 <code>common\\Counter-Strike Global Offensive\\content\\csgo_addons\\xxxx</code> 里。<br>其中 <code>soundevents</code> 文件夹里存放着声音脚本文件 <code>.vsndevts</code> ，可以用，<br><code>sounds</code> 文件夹里放着具体的音频源文件，比如 <code>.mp3 .wav</code> 。  </p>\n<p>看起来起源2引擎依然使用的是和以往一样的 44100 hz 的音频文件。  </p>\n<p>后续编译好的文件会在 <code>common\\Counter-Strike Global Offensive\\game\\csgo_addons\\xxxx</code> 里。  </p>\n<h1 id=\"编写声音脚本-vsndevts\"><a href=\"#编写声音脚本-vsndevts\" class=\"headerlink\" title=\"编写声音脚本 vsndevts\"></a>编写声音脚本 vsndevts</h1><p>空白地图项目自带一个叫 <code>soundevents_addon.vsndevts</code> 的声音脚本，里面有飞机音效、鸟叫音效的样例。   </p>\n<p>如果你是要在自己的地图里使用，那么就不要改文件名，就在 <code>soundevents_addon.vsndevts</code> 里编写。<br>如果是要在其他插件里自定义调用，就最好复制出来改个文件名，比如 <code>abc.vsndevts</code>      </p>\n<p><code>soundevents_addon.vsndevts</code> 文件里写了一些说明，有兴趣可以自己看以下。<br>以及可以看看 <a href=\"https://developer.valvesoftware.com/wiki/Counter-Strike_2_Workshop_Tools/Addon_Sounds\">Valve 开发者 wiki 里的说明</a>。   </p>\n<p>起源2 的大部分地方都是使用音频事件 (Sound Event) 来播放的，音频事件里指定了使用什么文件、什么类型、多少音量、什么音效(DSP)。<br>每个音频事件都有一个名字 (Sound Event Name)，由编写者指定，在地图或实体播放的时候按音频事件的名字进行使用。   </p>\n<p>以前还能在地图里使用直接的音频文件名播放，现在就别想了。实体连音量都改不了，只能在脚本里预先写好。   </p>\n<p>一个最简单的音频事件的格式示例：    </p>\n<pre><code class=\"c++\">&quot;exgze.cheer&quot; =  // 音频事件的名字，尽量以 a.b 或者 a.b.c 来编写\n&#123;\n    type = &quot;csgo_music&quot;  // 类型\n    volume = 1.0     // 音量\n    vsnd_files =   // 使用的文件，如果是多个会在播放的时候随机选其中一个。\n    [\n        &quot;sounds/exg/cheer/1.vsnd&quot;,  // 文件必须是 .vsnd 结尾，不管源文件是什么\n        &quot;sounds/exg/cheer/2.vsnd&quot;  // 因为后面我们会编译，把普通格式变成 .vsnd_c\n    ]\n&#125;\n</code></pre>\n<p>声音类型有三种：<br><code>csgo_mega</code> 常规3D范围音效。站的越近声音越大。<br><code>csgo_music</code> 表示对任何人来说播放都是一样的效果。适合播放UI音效、音乐、音乐盒。<br><code>csgo_3d</code> wiki 里说这是环境背景音，然而官方vpk里没有一个脚本是使用了这个。<br>而且我发现使用了 <code>csgo_3d</code> 之后，连 hammer 都不承认它存在了，说明可能是个被放弃的早期版本。   </p>\n<p>需要注意的是， <code>csgo_music</code> 使用 <code>vsnd_files</code> 来表示音频文件列表，<br>而 <code>csgo_mega</code> 使用 <code>vsnd_files_track_01</code> 来表示。<br>这个写反了就当没有音频文件了。   </p>\n<h2 id=\"音量\"><a href=\"#音量\" class=\"headerlink\" title=\"音量\"></a>音量</h2><p><code>csgo_music</code> 类型的音量默认受玩家参数 <code>snd_musicvolume</code> 的控制。<br>这些声音脚本有很多参数的功能是未知的，我也是在摸索，比如我发现我自己写 <code>volume_convar</code> 就不好使。<br>可能是因为我们调用这些音频都是来自实体，所以都被游戏认为是 music ，而不是 ui 或者别的音频通道了。   </p>\n<p><code>volume</code> 默认是 1 ，可以写比 1 低也可以写比 1 高。（我印象中以前音量都是只能低不能高的）   </p>\n<h2 id=\"声音播放范围\"><a href=\"#声音播放范围\" class=\"headerlink\" title=\"声音播放范围\"></a>声音播放范围</h2><p><code>distance_volume_mapping_curve</code> 指的是距离和音量的映射曲线。<br>需要像下面这样写，其实我也不太懂这个曲线到底是个什么种类的曲线。<br>映射关系的每个元素有6个数字，就只需要改头两个数字，第一个数字是距离，第二个数字是音量。<br>下面的样例代码里表示的是最远到 900 距离开外听见，音量逐步减小。  </p>\n<p>如果不写这个的话，貌似默认的 <code>csgo_mega</code> 只有 128 距离那么远。   </p>\n<p>甚至可以再加入元素使得声音大小起起伏伏（比如站的最近声音小，站中间声音大）。   </p>\n<p>如果写一个 99999 距离也是 1.0 音量，则表示全图可以听见，但是这个和 music 还是有区别的。<br>玩家听到的声音的左右声道的大小是不一致的，因为他们不一定面向声源。   </p>\n<pre><code class=\"c++\">&quot;exgze.test10mega&quot; = \n&#123;\n    type = &quot;csgo_mega&quot;\n    volume = 1.0 // 这里会被当做标准值，后面曲线会乘以这个数\n    vsnd_files_track_01 = &quot;sounds/exg/test10s.vsnd&quot;\n    distance_volume_mapping_curve = \n    [\n        [\n            0.0, 1.0, // 距离声音原点零距离时，音量为1.0\n             -0.00394, -0.00394, // 后面4个数字是照抄的，不知道什么意思\n            2.0, 3.0,\n        ],\n        [\n            900.0, 0.0, // 距离声音原点距离 900 单位时，音量为零\n             -0.002991, -0.002991,\n            2.0, 3.0,\n        ]\n    ]\n&#125;\n</code></pre>\n<h2 id=\"一些官方示例\"><a href=\"#一些官方示例\" class=\"headerlink\" title=\"一些官方示例\"></a>一些官方示例</h2><p>一个官方的音乐盒的示例：   </p>\n<pre><code class=\"c++\">Music.MVPPreview.halflife_alyx_01 = \n&#123;\n    type = &quot;csgo_music&quot;\n    volume = 0.800000\n    volume_convar = &quot;snd_menumusic_volume&quot;  // 这里是说它同时受玩家设置里的音乐音量的控制\n    stop_music = &quot;true&quot;\n    vsnd_files = &quot;sounds/music/halflife_alyx_01/roundmvpanthem_01.vsnd&quot;\n    vsnd_duration = 16.692245  // 音乐长度，我们一般不写，编译的时候会自动进去\n&#125;\n</code></pre>\n<p>一个官方的示例，人质受伤（精简过，原文有点长）：   </p>\n<pre><code class=\"c++\">Hostage.Pain = \n&#123;\n    type = &quot;csgo_mega&quot;\n    volume = 0.899902\n    pitch = 1.000000\n    mixgroup = &quot;VO&quot;\n    block_duration = 0.300000\n    block_distance = 69.000000\n    use_distance_volume_mapping_curve = true\n    reverb_wet = 0.300000\n    display_broadcast = true\n    occlusion_intensity = 0.500000\n    occlusion_frequency_scale = 0.500000\n    vsnd_files_track_01 =\n    [\n        &quot;sounds/vo/hostage/hpain/hpain1.vsnd&quot;,\n        &quot;sounds/vo/hostage/hpain/hpain2.vsnd&quot;,\n        &quot;sounds/vo/hostage/hpain/hpain3.vsnd&quot;\n    ]\n    distance_volume_mapping_curve = \n    [\n        [\n            81.028969,\n            1.000000,\n            0.000000,\n            0.000000,\n            2.000000,\n            3.000000,\n        ],\n        [\n            211.771500,\n            0.634147,\n            -0.001725,\n            -0.001725,\n            2.000000,\n            3.000000,\n        ],\n        [\n            1100.000000,\n            0.000000,\n            -0.000557,\n            -0.000557,\n            2.000000,\n            3.000000,\n        ]\n    ]\n    vsnd_duration = 0.586757\n&#125;\n</code></pre>\n<h1 id=\"编译脚本与声音\"><a href=\"#编译脚本与声音\" class=\"headerlink\" title=\"编译脚本与声音\"></a>编译脚本与声音</h1><p>在 <code>Asserts Browser</code> 里搜索你的声音文件和脚本文件。<br>全部选中，按鼠标右键，选择 <code>Full Recompile</code>。   </p>\n<p>这样  <code>.vsndevts</code> 就会变成 <code>.vsndevts_c</code>文件，<br><code>.mp3 .wav</code> 就会变成 <code>.vsnd_c</code> 文件（内嵌进去）了。<br>编译好的文件会在 <code>common\\Counter-Strike Global Offensive\\game\\csgo_addons\\xxxx</code> 里。  </p>\n<p>一般来说如果开着 hammer，对 <code>.vsndevts</code> 的编译是全自动的。   </p>\n<p><img src=\"/image/vsnd1.png\">   </p>\n<h1 id=\"试听\"><a href=\"#试听\" class=\"headerlink\" title=\"试听\"></a>试听</h1><p>如果要试听，可以把要试听的部分编辑到 <code>soundevents_addon.vsndevts</code> 里面，<br>然后在 hammer 里加个声音实体，打开 <code>Sound Event Picker</code> 试听。<br>如果 Picker 里找不到，试试重新编译一次，应该是会每次打开 Picker 的时候刷新的。<br>如果点击了没有声音预览，说明你写的有问题或者音频文件有问题。   </p>\n<p><img src=\"/image/vsnd2.png\">   </p>\n<h1 id=\"实体兼容性\"><a href=\"#实体兼容性\" class=\"headerlink\" title=\"实体兼容性\"></a>实体兼容性</h1><p><code>snd_event_point</code> 和 <code>ambient_generic</code> 都可以正常播放 mega 和 music 。<br>但是在使用 <code>ambient_generic</code> 的时候一定要注意正确勾选 <code>Is NOT Looped(32)</code> （貌似绝大多数情况下都要勾上，不然不播放）    </p>\n<p><code>ambient_generic</code> 实体无法干预声音脚本自己的音量和播放范围。   </p>\n",
            "tags": [
                "code",
                "cs2"
            ]
        },
        {
            "id": "http://buyi.dev/2024/notfriend/",
            "url": "http://buyi.dev/2024/notfriend/",
            "title": "小小说：要你管！",
            "date_published": "2024-02-11T01:04:56.000Z",
            "content_html": "<p>A: 你和你父母更像朋友还是敌人？   </p>\n<p>B: 更像朋友。   </p>\n<p>A: 是朋友还不让你和我语音？是朋友还不让你女装？是朋友还要你上交工资？<br>你做任何事情都是要偷偷摸摸的背着朋友的是吧。   </p>\n<p>B: 要你管！滚。  </p>\n",
            "tags": [
                "小小说",
                "家庭"
            ]
        },
        {
            "id": "http://buyi.dev/2024/no-home/",
            "url": "http://buyi.dev/2024/no-home/",
            "title": "我为什么讨厌老家",
            "date_published": "2024-02-07T12:33:01.000Z",
            "content_html": "<p>自我2021年1月26日离开浙江，1月27日抵达昆明以来，我就再没离开昆明市。<br>浙江已经完全没有什么值得我去的了。<br>我非常的喜欢昆明，喜欢这个省城、大城市。   </p>\n<p>为什么说讨厌老家，说白了就是穷，落后，加上父母的压迫。<br>我这里说的老家，包括老家县城和老家乡下。   </p>\n<p>县城里有什么，麦当劳都没有，想吃麦当劳和汉堡王得坐火车去城市里。<br>随便生点什么大病，就也是往城里去。<br>过年就要去老家乡下，去看老人，住十几天，这就是最要命的事情。<br>小时候经常看别人参加漫展，我们这从来没有参加过，为什么，谁tm漫展开县里面啊？<br>小时候教科书里有动物园、科技馆、博物馆这些，我们都不知道那是什么的，都是猜个大概里面是什么样。我都是长这么大到昆明了才第一次参观博物馆和科技馆。   </p>\n<p>你本来县城里就够落后的，去到乡下更是不得了。<br>快递没有，可能有中国邮政。<br>家里电脑、洗衣机、空调，都没有。<br>网约车没有，只有乡镇公交车。<br>大银行也没有，只有村镇的。<br>外卖没有，饭店过年也不开，或者开着就非常贵。<br>有什么，有蜘蛛，有鸡鸭的粪便，还有丑陋的自建房，还有大人的打牌声、麻将声和二手烟。<br>在这种环境下，你有什么可以做的。<br>一天到晚就是叫你做家务或者看一台分辨率很低的电视。<br>我小的时候没的选，只能在这样的环境里，非常容易闹矛盾闹情绪，可是又不能回县城。<br>想走都不方便，那时候连网约车都没有。等乡镇公交车是一件费时费力的事情。<br>这就是一个陷阱，把你地理上困在这，然后再用父母的强权去折磨你。   </p>\n<p>我不是说去到乡村过年是坏事，我意思是没有选择，被逼着去乡村过年是坏事。<br>你主动去乡村看看山水，吃喝玩乐，那可以叫旅游和放松。<br>你被逼着去乡村干活和吃苦和忍受寂寞，那是让你去“上山下乡”。<br>而现在我离家出走了，我一定要坚持到底，斗争到底，坚决不能让这种事情再次发生在我身上。   </p>\n<p>对老家的盲目崇拜，我把它叫做：<br>把原始当根，把落后当本，<br>把奴性当孝，把盲从当顺。   </p>\n<p>也许我的父母会说：“现在老家已经有快递了、有网约车了、有洗衣机了”<br>你现在说有用吗？你是想割地赔款还是想下跪认罪？    </p>\n<p>截止本文编写的时候，我已经离开了浙江省3年加十天。<br>我也就在昆明待了3年加十天，本本分分地做着工作养活自己，快乐自己。   </p>\n",
            "tags": [
                "家庭"
            ]
        },
        {
            "id": "http://buyi.dev/2024/parent-rights/",
            "url": "http://buyi.dev/2024/parent-rights/",
            "title": "父母的黑暗面权力有多大",
            "date_published": "2024-01-04T01:12:09.000Z",
            "content_html": "<p>这篇文章是视频演讲稿。<br>视频请看：  </p>\n<ul>\n<li><a href=\"https://www.bilibili.com/video/BV1vW4y1P7HQ\">bilibili</a></li>\n<li><a href=\"https://youtu.be/ekyRwSPSIz0\">YouTube</a></li>\n<li><a href=\"https://m.weibo.cn/status/NAiWCA7Xf\">微博</a></li>\n</ul>\n<hr>\n<p>父母，或者说监护人，他们对你，也就是对被监护人的权力其实大到难以想象。<br>我把他们能做的坏事简单分类了一下，做成今天的这个视频。   </p>\n<p>当然本视频里只讲我们国家的现状，不讲其他国家是怎么做的，因为我也没有去过我也不知道实际。   </p>\n<p>以及我只说父母可以有的坏的部分的权力，他们可以不使用这些权力，去当一个好父母。<br>你可以当作一个警告，我只希望你从来没有遇到布衣说的这些事情。   </p>\n<h1 id=\"1-父母有权不作为\"><a href=\"#1-父母有权不作为\" class=\"headerlink\" title=\"1 父母有权不作为\"></a>1 父母有权不作为</h1><p>很简单的例子，如果你的学校组织了秋游，假如你在那自己不小心掉河里去淹死了，<br>你敢保证你的父母不去起诉学校吗？<br>你父母肯定会去追究学校的责任，因为他们不组织秋游你就不会死。   </p>\n<p>但是父母如果是亲自带着子女的，子女自己淹死了，父母会受到任何追究吗？<br>很明显，不会。<br>就看上海2023年十月海滩走失的这个女孩，这个新闻闹得这么大了。这么多人都去找一个走失的女孩子。<br>你看她的父母有承担法律责任吗？有给他们判遗弃罪吗，有给他们判过失致人死亡罪吗？<br>新闻没有报道父母有没有得到法律惩罚，我也不觉得会有。据我了解，我们国家是从来没有孩子走失了给父母定罪的先例。   </p>\n<p><a href=\"https://m.weibo.cn/status/NmC6dxXW1\">2023年10月 南汇海滩走失女童疑似在水边摔倒后消失在海浪中</a>   </p>\n<p>就算是他们家雇的保姆带小孩出去玩，小孩走丢了，淹死了，父母肯定也得起诉这个保姆。<br>但是亲自带出去，那就什么罪都没有。   </p>\n<p>其实父母可以利用这一点优势，给你买旅游保险，找个不被人注意到的办法，你死了，<br>父母可以直接领取几百万的死亡赔款。   </p>\n<p>还有数不清的幼儿卡在窗户防盗栏事件，年年都犯。<br>防盗栏总是你自家的吧？自己家里小孩都出事了，难道还不能算父母的过失、父母的不作为吗？   </p>\n<p><a href=\"https://m.weibo.cn/status/NzmEs6NGW\">2023年12月 广东江门一名幼童被卡五楼防护栏</a><br><a href=\"https://m.weibo.cn/status/Nk2r6jnu5\">2023年9月 广东湛江一个孩子头卡防护栏身体悬在半空</a>   </p>\n<p>还有一种是对社会有危害的不作为。<br>小孩不听话，在公共场合随地大小便，或者在动物园里拿石块砸动物，种种不文明行为。<br>甚至是跑到你家里把你电脑弄坏了，把你手办摔了。<br>不要觉得这个没什么，这是父母主动把你的尊严丢掉了。<br>随地大小便，在公共场合大吵大闹的人，你会瞧得起这种人吗？<br>在你意识不到自己在做什么的时候，你的父母就已经通过这种不作为，把你的尊严丢掉了。   </p>\n<h1 id=\"2-父母有权乱作为\"><a href=\"#2-父母有权乱作为\" class=\"headerlink\" title=\"2 父母有权乱作为\"></a>2 父母有权乱作为</h1><p>重男轻女，好东西全给男孩子，剩下的不要的才给女孩子，这是最典型的乱作为了。<br>主流媒体总是宣传张桂梅老师推动开办了全国第一所全免费的女子高中的事迹。<br>为什么说要宣传免费女子高中怎么怎么好，就是因为当地的重男轻女非常严重，当地人普遍不让女孩读高中。<br>那为什么不直接在央视等主流媒体上抨击这个重男轻女，不让女孩上学的现象呢？   </p>\n<p>就是因为父母有权乱作为。<br>这是合法的，重男轻女不违法，没有受到法律的明令禁止。   </p>\n<p>还有个乱作为很常见的例子，就是干预子女的高考后选择。<br>篡改志愿和偷走大学录取通知书。<br>2023年8月，母亲偷走女儿录取通知书，就是因为考上的大学和母亲想要的不一样。<br>她居然还是通过算命先生来决定女儿的前程的。<br>事后不还是什么都没有，这种母亲受到法律惩罚了吗？   </p>\n<p><a href=\"https://m.weibo.cn/status/NfX8sEPPP\">2023年8月 母亲偷走女儿录取通知书</a>   </p>\n<p>我这里有一条新闻是高考志愿被同班同学篡改了，那个篡改者被警察拘留了5天。<br>你见过哪个父母篡改了子女的志愿，或者逼着子女改了自己的志愿，然后要被拘留的？   </p>\n<p><a href=\"https://m.weibo.cn/status/N8m9Ko4O4\">2023年7月 高考志愿被同学篡改，警方查明后拘留5天</a>   </p>\n<p>所有这些乱作为，都可以说是“我是为你好”。<br>表达起来就是： <code>好的出发点 + 强权 = 为所欲为</code>    </p>\n<p>所以我现在非常认可 tombkeeper 老师说的<a href=\"https://m.weibo.cn/status/NyqalbsQV\">这句话</a>。   </p>\n<p>“出发点是好的”，这句话就是没有意义的，说难听点，就是放屁。<br>父母的乱作为，你把出发点去掉，本质上就是 <code>强权 = 为所欲为</code>   </p>\n<p>其他还有很多为所欲为的、乱作为的表现，比如没收你的压岁钱零花钱，砸了你的电脑手机游戏机。<br>或者逼着你去学钢琴、学奥数等等你不感兴趣的东西。   </p>\n<h1 id=\"3-父母有权使用暴力\"><a href=\"#3-父母有权使用暴力\" class=\"headerlink\" title=\"3 父母有权使用暴力\"></a>3 父母有权使用暴力</h1><p>家庭暴力，就是只要打不死，就往死里打。<br>你看2023年六月这个新闻，孩子都被父母打的从五楼跳下去了，警察也不能拿父母怎么样。   </p>\n<p><a href=\"https://m.weibo.cn/status/N76fA8zq9\">2023年6月 合肥一男童站在5楼窗口，屋内有人用棍棒击打后他跳下楼。警方表示这是家务事</a>   </p>\n<p>而且家庭暴力没有说一定要通过父母本人来实现。<br>我国有大量的所谓教育机构、青少年矫正机构、网瘾治疗学校在运作。<br>他们行使的权利，就是你的父母授予给他们的。<br>他们运作的资金，是你的父母付给他们的。<br>是正儿八经的家长花钱请人揍你。   </p>\n<p><a href=\"https://m.weibo.cn/status/MzOSEbu3c\">豫章书院吴某豹称打学生前会先问家长：家长同意才会打</a></p>\n<p>假如不是监护人把小孩送进去，你觉得他们敢收吗？<br>连他们都知道拐卖小孩是罪，替父母“教育”小孩不是罪。   </p>\n<h1 id=\"4-父母关系不可断开\"><a href=\"#4-父母关系不可断开\" class=\"headerlink\" title=\"4 父母关系不可断开\"></a>4 父母关系不可断开</h1><p>父母关系在法律上是一种通过血缘来认定的关系，只要血缘证明你是他们生的，那就是不可断开的。   </p>\n<p><a href=\"https://tv.cctv.com/2023/12/30/VIDE5MLLSYPLEAmFMFNilYBZ231230.shtml\">CCTV-12 [法治深壹度]如果可以，我不想再做他儿子 2023-12-30</a>   </p>\n<p>这也是法律里唯一一种不能断开的社会关系。<br>你可以离婚，你可以退学，你可以辞职，你只要偿清欠款，你也能远离你的债主。<br>你的牢坐到头了，你也可以离开监狱，开始新生活。   </p>\n<p>但是父母关系是就和量子纠缠一样，不管你去哪里，怎么做，他们都是你父母。<br>他们又非常像皇帝和皇后，这是非常典型的终身独裁的制度。   </p>\n<p>你知道人类社会里另外一个不可断开的关系是什么吗？<br>就是奴隶制，奴隶可没有权利选择为哪个主人效劳或离开主人的奴役。   </p>\n<p>这样一种不可断开的关系，非常容易造成矛盾，就是家人之间天天吵架。<br>而且绝大多数情况下，都是你的父母在侮辱你、责怪你，甚至歧视你、猜忌你、不支持你的理想。   </p>\n<p>如果我和你是朋友，你和我聊天。<br>你说你想成为一个医生，我说你没出息，说你迟早累死在岗位上。<br>你说你想去学汽修，我也说你没出息，又苦又脏又累的。<br>我天天这么和你说话，你肯定会拉黑我。<br>如果你父母天天这么和你说话，你有胆子拉黑他们吗？   </p>\n<p>我问你有多少存款，每个月多少工资，能不能分我点。<br>你肯定会想不认我这个朋友（真正的朋友就不会互相打探隐私）<br>你父母问你有多少钱，你敢不说吗？   </p>\n<p>很多时候，同样一件事情，你可以做，我不能做，不是因为钱不够，也不是因为不方便，<br>而是因为你的父母允许，我的父母不允许，就这么简单。   </p>\n<p>你朋友做了出格的事情，你可以，也应该果断地和ta划清界限。<br>可不管你父母做出多么出格的事情，多么没有原则、没有底线，<br>你父母都还是你父母，所以他们才敢肆无忌惮啊。  </p>\n<h1 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h1><ul>\n<li>父母有权不作为：疏忽照顾、纵容孩子做不文明的事情</li>\n<li>父母有权乱作为：重男轻女、篡改高考志愿、没收压岁钱、砸你电脑</li>\n<li>父母有权使用暴力：亲自打你，把你送到网瘾学校花钱让别人打你</li>\n<li>父母关系不可断开：不管你父母做出多么出格的事情，你父母都还是你父母。所以他们肆无忌惮</li>\n</ul>\n<p>父母关系不可断开，这也是一条权力，因为他们有权且必须当你一辈子的父母。   </p>\n<p>以上就是我对父母的权力的黑暗面的认识。   </p>\n<p>他们有这么大的权力，做了这么多事，可以从小打你，没收你的钱财，砸你的东西，还篡改你的高考志愿，最后还不会受到来自法律的严惩，你还不能和他断开关系。<br>只要你不是明面上的缺胳膊少腿或者死了，都只是“民事”，还不是刑事。<br>这就是最可怕的地方，他可以这么做，你不能逃避，法律也不追究。   </p>\n<p>像我离家出走了快三年了，我如果在外面出点事，我的存款，可能还要全部被血亲吸走。<br>在父母有制度优势的时候，我只能创建地理优势，我距离老家这么远，我也只是能站稳脚跟，隔空叫骂。   </p>\n<p>我也没有其他能说的了，希望大家不要遇到使用这些权力的父母。<br>如果遇到了这种父母、这些事情，怎么解放自己不是我要教的内容。   </p>\n<p>最后我摘录了几段视频，放给大家看。<br>我觉得他们讲的都非常好。   </p>\n<p>第一段是易中天老师讲的。<br><a href=\"https://tv.cctv.com/2010/03/24/VIDE1355151218668587.shtml\">百家讲坛《先秦诸子百家争鸣第六部继往开来》老子与庄子</a><br>36:00 开始。   </p>\n<p>第二段是我想放给一些自认为可以熬过父母的人的，来自王立群老师的。<br><a href=\"https://tv.cctv.com/2011/12/28/VIDE1355519907869756.shtml\">《百家讲坛》 20111228 王立群读《史记》——秦始皇（四十四）汉儒评秦</a><br>27:30 开始。   </p>\n<p>第三段是罗翔老师讲的父母特权的一个例子。<br><a href=\"https://www.bilibili.com/video/BV1KG411v7KT\">罗老师，我爸老是偷看我短信，他构成犯罪吗？</a><br>01:15 开始。  </p>\n<p>第四段也是易中天老师讲的。<br><a href=\"https://tv.cctv.com/2010/03/24/VIDE1355151280089730.shtml\">百家讲坛《先秦诸子百家争鸣第五部前因后果》魅力所在</a><br>2:40 开始。   </p>\n",
            "tags": [
                "家庭"
            ]
        },
        {
            "id": "http://buyi.dev/2023/mysqlsteamid/",
            "url": "http://buyi.dev/2023/mysqlsteamid/",
            "title": "Mysql 函数实现的 Steam id64/id32 转好友编码",
            "date_published": "2023-12-17T06:06:23.000Z",
            "content_html": "<p>直接上代码：   </p>\n<h1 id=\"定义\"><a href=\"#定义\" class=\"headerlink\" title=\"定义\"></a>定义</h1><pre><code class=\"sql\">delimiter $$\nCREATE function `GetSteamId3FromId32`(str CHAR(50)) returns bigint DETERMINISTIC\nCOMMENT &#39;把 STEAM_0:1:2 的格式转换为好友代码&#39;\nBEGIN\n    declare middleStr CHAR(5);\n    declare rightStr CHAR(20);\n    declare num1 int;\n    declare num2 int;\n    if CHAR_LENGTH(str) &lt; 3 then\n        return 0;\n    end if;\n    set rightStr = SUBSTRING_INDEX(str, &#39;:&#39;, -1);\n    set middleStr = MID(str, CHAR_LENGTH(str) - CHAR_LENGTH(rightStr)- 1, 1);\n    set num1 = CAST(rightStr as SIGNED);\n    set num2 = CAST(middleStr as SIGNED);\n    RETURN num1 * 2 + num2;\nEND $$\ndelimiter ;\n\ndelimiter $$\nCREATE function `GetSteamId3FromId64`(old bigint) returns bigint DETERMINISTIC\nCOMMENT &#39;把17位steam id64的数字转换为好友代码&#39;\nBEGIN\n    declare num bigint;\n    if old &lt; 76000000000000000 then\n        return 0;\n    end if;\n    set num = old &lt;&lt; 32;\n    set num = num &gt;&gt; 32;\n    if num &lt; 1 then\n        return 0;\n    end if;\n    return num;\nEND $$\ndelimiter ;\n</code></pre>\n<h1 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h1><pre><code class=\"sql\">-- 第1个例子，我自己的 steam id\nselect GetSteamId3FromId32(&#39;STEAM_0:1:69600329&#39;) as `a`,\n  GetSteamId3FromId32(&#39;abcd1:69600329&#39;) as `b`, \n  GetSteamId3FromId32(&#39;1:69600329&#39;) as `c`,\n  GetSteamId3FromId64(76561198099466387) as `d`,\n  GetSteamId3FromId64(&#39;76561198099466387&#39;) as `e`;\n\n-- 第2个例子，批量转换\nSELECT `authid`, GetSteamId3FromId32(`authid`) AS `fcode` \n  FROM `xxx` LIMIT 10;\n</code></pre>\n<p><img src=\"/image/mysqlsteam1.png\">   </p>\n<p><img src=\"/image/mysqlsteam2.png\">   </p>\n<h1 id=\"卸载\"><a href=\"#卸载\" class=\"headerlink\" title=\"卸载\"></a>卸载</h1><pre><code class=\"sql\">drop function if exists `GetSteamId3FromId32`;\ndrop function if exists `GetSteamId3FromId64`;\n</code></pre>\n",
            "tags": [
                "code",
                "MYSQL"
            ]
        },
        {
            "id": "http://buyi.dev/2023/copyincmd/",
            "url": "http://buyi.dev/2023/copyincmd/",
            "title": "在 CMD 里复制文件夹",
            "date_published": "2023-11-11T12:05:56.000Z",
            "content_html": "<p>要把一个文件夹及里面的子文件、子文件夹、子文件夹里的子文件、子文件夹全部复制到另外一个地方。<br>用 cmd 要怎么实现？    </p>\n<p>第一反应是 <code>copy</code> ，然而它只能复制文件夹里的文件，不能复制文件夹里的文件夹。   </p>\n<pre><code class=\"cmd\">&gt;copy t1/* t2 /y\nThe syntax of the command is incorrect.\n\n&gt;copy t1\\* t2&quot; /y\nt1\\a.txt\n        1 file(s) copied.\n</code></pre>\n<p>经过一番搜索，正确的做法是：   </p>\n<pre><code class=\"cmd\">&gt;xcopy t1 t2 /y/c/s/e\nt1\\a.txt\nt1\\t9\\New Text Document - Copy (2).txt\nt1\\t9\\New Text Document - Copy (3).txt\nt1\\t9\\New Text Document - Copy.txt\nt1\\t9\\New Text Document.txt\nt1\\t9 - Copy\\New Text Document - Copy (2).txt\nt1\\t9 - Copy\\New Text Document - Copy (3).txt\nt1\\t9 - Copy\\New Text Document - Copy.txt\nt1\\t9 - Copy\\New Text Document.txt\n9 File(s) copied\n</code></pre>\n<p><code>/s</code> 参数是复制目录和子目录，除非它们是空的。<br><code>/e</code> 复制所有子目录，即使它们是空的。    </p>\n<p>xcopy 的微软官方文档：<a href=\"https://learn.microsoft.com/zh-cn/windows-server/administration/windows-commands/xcopy\">点我</a>   </p>\n<p>而且 cmd 还有一个不一样的地方，就是很多cmd指令只承认 <code>\\</code> 字符作为路径分隔符，它不承认 <code>/</code> 字符。   </p>\n<p>为什么我要用 cmd 复制个文件夹呢，因为我发现 .NET C# 的 <code>System.IO</code> 里没有复制文件夹的功能（但是它居然有 Move 整个文件夹的功能）。<br>官方是给了个<a href=\"https://learn.microsoft.com/zh-cn/dotnet/standard/io/how-to-copy-directories\">示例函数</a>来做这个事情。<br>我以为用 cmd 能简单一些，结果也这么多麻烦事情。   </p>\n<p>但是 .NET VB 可真就简单多了。<br><code>Microsoft.VisualBasic.FileIO</code> 里就有直接复制整个文件夹的功能：<code>FileSystem.CopyDirectory(src,dest)</code>   </p>\n<p>Powershell 也简单：   </p>\n<pre><code class=\"powershell\">Copy-Item .\\t1\\* .\\t2 -Recurse -Force\n</code></pre>\n",
            "tags": [
                "code",
                ".net"
            ]
        },
        {
            "id": "http://buyi.dev/2023/exportqq/",
            "url": "http://buyi.dev/2023/exportqq/",
            "title": "从QQ空间网页导出QQ好友列表",
            "date_published": "2023-10-18T12:22:07.000Z",
            "content_html": "<p>以前我都是用QQ邮箱网页版来导出QQ好友列表做备份的。（把全部的好友添加到邮箱通讯录，然后导出邮箱通讯录即可）<br>然而我今天发现这个不好使了。他们断开了QQ邮箱网页版和QQ好友列表的关联。下面这个窗口不断弹出。  </p>\n<p><img src=\"/image/qqexport1.png\">  </p>\n<p>我想到了另外一个老古董，QQ空间。经过一番鼓捣，找到了具体的XHR请求网址。<br>首先到网页版登录<a href=\"https://i.qq.com/\">QQ空间</a>，<br>如果你没有开通QQ空间也没有关系，也可以登录而不开通，里面也是可以看见别人的说说、相册的。<br>你甚至可以不开通空间的情况下自己发说说，就是别人看不见。<br>登录进来之后按F12进入开发者工具，找到 Network 区域准备抓包。  </p>\n<p><img src=\"/image/qqexport2.png\">   </p>\n<p>接下来点击好友动态，准备发一条说说。点一下 @ 符号，好友列表就从下面冒出来了。<br>在 Network 里搜索一条请求，文件名叫 <code>friend_show_qqfriends.cgi</code>    </p>\n<p><img src=\"/image/qqexport3.png\">   </p>\n<p>把它的返回内容保存为 .json 文件，就是你的QQ好友列表了。（虽然不是完美的 json ，需要麻烦手动去掉头尾的 callback js 语句）<br>里面的 items 的 uin 数字就是QQ号了。<br>这个功能可能也就QQ空间这种腾讯一直不更新的能做到了。   </p>\n<p>我今天一开始想到的是腾讯文档，他可以选择分享给指定QQ好友，<br>然后也会有一个好友列表，然而它数据里的 QQ UIN 是另外一种算法的数字。不是我们日常使用的QQ号，是经过了某种算法或单纯随机的新的数编号。   </p>\n",
            "tags": [
                "code"
            ]
        }
    ]
}